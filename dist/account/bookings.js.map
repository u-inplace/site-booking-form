{"version":3,"file":"account/bookings.js","mappings":"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","sources":["webpack://ui-booking/./node_modules/@gogocat/data-bind/dist/js/dataBind.js","webpack://ui-booking/./node_modules/date-fns/esm/_lib/requiredArgs/index.js","webpack://ui-booking/./node_modules/date-fns/esm/_lib/toInteger/index.js","webpack://ui-booking/./node_modules/date-fns/esm/addMonths/index.js","webpack://ui-booking/./node_modules/date-fns/esm/toDate/index.js","webpack://ui-booking/./src/helpers/dates.js","webpack://ui-booking/webpack/bootstrap","webpack://ui-booking/webpack/runtime/compat get default export","webpack://ui-booking/webpack/runtime/define property getters","webpack://ui-booking/webpack/runtime/hasOwnProperty shorthand","webpack://ui-booking/webpack/runtime/make namespace object","webpack://ui-booking/./src/account/packages/bookings.js"],"sourcesContent":["/**\n * @gogocat/data-bind\n * version 1.12.0\n * By Adam Chow\n * link https://gogocat.github.io/dataBind/\n * license MIT\n * \n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.dataBind = factory());\n}(this, (function () { 'use strict';\n\n    const bindingAttrs$1 = {\n      comp: 'data-bind-comp',\n      tmp: 'data-bind-tmp',\n      text: 'data-bind-text',\n      click: 'data-bind-click',\n      dblclick: 'data-bind-dblclick',\n      blur: 'data-bind-blur',\n      focus: 'data-bind-focus',\n      hover: 'data-bind-hover',\n      input: 'data-bind-input',\n      change: 'data-bind-change',\n      submit: 'data-bind-submit',\n      model: 'data-bind-model',\n      show: 'data-bind-show',\n      css: 'data-bind-css',\n      attr: 'data-bind-attr',\n      forOf: 'data-bind-for',\n      if: 'data-bind-if',\n      switch: 'data-bind-switch',\n      case: 'data-bind-case',\n      default: 'data-bind-default'\n    };\n    const serverRenderedAttr = 'data-server-rendered';\n    const dataIndexAttr = 'data-index';\n    const commentPrefix = {\n      forOf: 'data-forOf_',\n      if: 'data-if_',\n      case: 'data-case_',\n      default: 'data-default_'\n    };\n    const commentSuffix = '_end';\n    const bindingDataReference = {\n      rootDataKey: '$root',\n      currentData: '$data',\n      currentIndex: '$index',\n      mouseEnterHandlerName: 'in',\n      mouseLeaveHandlerName: 'out'\n    };\n    const bindingUpdateConditions = {\n      serverRendered: 'SERVER-RENDERED',\n      init: 'INIT'\n    }; // maximum string length before running regex\n\n    const maxDatakeyLength = 250;\n    const constants = {\n      filters: {\n        ONCE: 'once'\n      },\n      PARENT_REF: '_parent'\n    };\n\n    const hasIsArray = Array.isArray;\n    const REGEX = {\n      BAD_TAGS: /<(script|del)(?=[\\s>])[\\w\\W]*?<\\/\\1\\s*>/ig,\n      FOR_OF: /(.*?)\\s+(?:in|of)\\s+(.*)/,\n      FUNCTION_PARAM: /\\((.*?)\\)/,\n      HTML_TAG: /^[\\s]*<([a-z][^\\/\\s>]+)/i,\n      OBJECT_LITERAL: /^\\{.+\\}$/,\n      PIPE: /\\|/,\n      WHITE_SPACES: /\\s+/g,\n      LINE_BREAKS_TABS: /(\\r\\n|\\n|\\r|\\t)/gm\n    };\n    const IS_SUPPORT_TEMPLATE = ('content' in document.createElement('template'));\n    const WRAP_MAP = {\n      div: ['div', '<div>', '</div>'],\n      thead: ['table', '<table>', '</table>'],\n      col: ['colgroup', '<table><colgroup>', '</colgroup></table>'],\n      tr: ['tbody', '<table><tbody>', '</tbody></table>'],\n      td: ['tr', '<table><tr>', '</tr></table>']\n    };\n    WRAP_MAP.caption = WRAP_MAP.colgroup = WRAP_MAP.tbody = WRAP_MAP.tfoot = WRAP_MAP.thead;\n    WRAP_MAP.th = WRAP_MAP.td;\n\n    const isArray = obj => {\n      return hasIsArray ? Array.isArray(obj) : Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    const isJsObject = obj => {\n      return obj !== null && typeof obj === 'object' && Object.prototype.toString.call(obj) === '[object Object]';\n    };\n\n    const isPlainObject = obj => {\n      if (!isJsObject(obj)) {\n        return false;\n      } // If has modified constructor\n\n\n      const ctor = obj.constructor;\n      if (typeof ctor !== 'function') return false; // If has modified prototype\n\n      const prot = ctor.prototype;\n      if (isJsObject(prot) === false) return false; // If constructor does not have an Object-specific method\n\n      if (prot.hasOwnProperty('isPrototypeOf') === false) {\n        return false;\n      } // Most likely a plain Object\n\n\n      return true;\n    }; // test if string contains '{...}'. string must not contains tab, line breaks\n\n\n    const isObjectLiteralString = (str = '') => {\n      return REGEX.OBJECT_LITERAL.test(str);\n    };\n\n    const isEmptyObject = obj => {\n      if (isJsObject(obj)) {\n        return Object.getOwnPropertyNames(obj).length === 0;\n      }\n\n      return false;\n    };\n\n    function getFirstHtmlStringTag(htmlString) {\n      const match = htmlString.match(REGEX.HTML_TAG);\n\n      if (match) {\n        return match[1];\n      }\n\n      return null;\n    }\n\n    function removeBadTags(htmlString = '') {\n      return htmlString.replace(REGEX.BAD_TAGS, '');\n    }\n\n    function createHtmlFragment(htmlString) {\n      if (typeof htmlString !== 'string') {\n        return null;\n      } // use template element\n\n\n      if (IS_SUPPORT_TEMPLATE) {\n        const template = document.createElement('template');\n        template.innerHTML = removeBadTags(htmlString);\n        return template.content;\n      } // use document fragment with wrap html tag for tr, td etc.\n\n\n      const fragment = document.createDocumentFragment();\n      const queryContainer = document.createElement('div');\n      const firstTag = getFirstHtmlStringTag(htmlString);\n      const wrap = WRAP_MAP[firstTag || 'div'];\n\n      if (wrap[0] === 'div') {\n        return document.createRange().createContextualFragment(htmlString);\n      }\n\n      queryContainer.insertAdjacentHTML('beforeend', `${wrap[1]}${htmlString}${wrap[2]}`);\n      const query = queryContainer.querySelector(wrap[0]);\n\n      while (query.firstChild) {\n        fragment.appendChild(query.firstChild);\n      }\n\n      return fragment;\n    }\n\n\n    const _get = function get(obj, path, def) {\n      function everyFunc(step) {\n        return !(step && (obj = obj[step]) === undefined);\n      }\n\n      const fullPath = path.replace(/\\[/g, '.').replace(/]/g, '').split('.').filter(Boolean);\n      return fullPath.every(everyFunc) ? obj : def;\n    };\n    /**\r\n     * getViewModelValue\r\n     * @description walk a object by provided string path. eg 'a.b.c'\r\n     * @param {object} viewModel\r\n     * @param {string} prop\r\n     * @return {object}\r\n     */\n\n\n    const getViewModelValue = (viewModel, prop) => {\n      return _get(viewModel, prop);\n    }; // simplified version of Lodash _.set\n    // https://stackoverflow.com/questions/54733539/javascript-implementation-of-lodash-set-method\n\n\n    const _set = (obj, path, value) => {\n      if (Object(obj) !== obj) return obj; // When obj is not an object\n      // If not yet an array, get the keys from the string-path\n\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || []; // Iterate all of them except the last one\n\n      path.slice(0, -1).reduce((a, c, i) => Object(a[c]) === a[c] ? // Does the key exist and is its value an object?\n      // Yes: then follow that path\n      a[c] : // No: create the key. Is the next key a potential array-index?\n      a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : // Yes: assign a new array object\n      {}, // No: assign a new plain object\n      obj)[path[path.length - 1]] = value; // Finally assign the value to the last key\n      // Return the top-level object to allow chaining\n\n      return obj;\n    };\n    /**\r\n     * setViewModelValue\r\n     * @description populate viewModel object by path string\r\n     * @param {object} obj\r\n     * @param {string} prop\r\n     * @param {string} value\r\n     * @return {call} underscore set\r\n     */\n\n\n    const setViewModelValue = (obj, prop, value) => {\n      return _set(obj, prop, value);\n    };\n\n    const getViewModelPropValue = (viewModel, bindingCache) => {\n      let dataKey = bindingCache.dataKey;\n      let paramList = bindingCache.parameters;\n      const isInvertBoolean = dataKey.charAt(0) === '!';\n\n      if (isInvertBoolean) {\n        dataKey = isInvertBoolean ? dataKey.substring(1) : dataKey;\n      }\n\n      let ret = getViewModelValue(viewModel, dataKey);\n\n      if (typeof ret === 'function') {\n        const viewModelContext = resolveViewModelContext(viewModel, dataKey);\n        const oldViewModelProValue = bindingCache.elementData ? bindingCache.elementData.viewModelPropValue : null;\n        paramList = paramList ? resolveParamList(viewModel, paramList) : []; // let args = [oldViewModelProValue, bindingCache.el].concat(paramList);\n\n        const args = paramList.concat([oldViewModelProValue, bindingCache.el]);\n        ret = ret.apply(viewModelContext, args);\n      }\n\n      ret = isInvertBoolean ? !Boolean(ret) : ret; // call through fitlers to get final value\n\n      ret = filtersViewModelPropValue({\n        value: ret,\n        viewModel: viewModel,\n        bindingCache: bindingCache\n      });\n      return ret;\n    };\n\n    const filtersViewModelPropValue = ({\n      value,\n      viewModel,\n      bindingCache\n    }) => {\n      let ret = value;\n\n      if (bindingCache.filters) {\n        each(bindingCache.filters, (index, filter) => {\n          const viewModelContext = resolveViewModelContext(viewModel, filter);\n          const filterFn = getViewModelValue.call(viewModelContext, viewModelContext, filter);\n\n          try {\n            ret = filterFn.call(viewModelContext, ret);\n          } catch (err) {\n            throwErrorMessage(err, `Invalid filter: ${filter}`);\n          }\n        });\n      }\n\n      return ret;\n    };\n\n    const parseStringToJson = str => {\n      // fix unquote or single quote keys and replace single quote to double quote\n      const ret = str.replace(/(\\s*?{\\s*?|\\s*?,\\s*?)(['\"])?([a-zA-Z0-9]+)(['\"])?:/g, '$1\"$3\":').replace(/'/g, '\"');\n      return JSON.parse(ret);\n    };\n    /**\r\n     * arrayRemoveMatch\r\n     * @description remove match items in fromArray out of toArray\r\n     * @param {array} toArray\r\n     * @param {array} frommArray\r\n     * @return {boolean}\r\n     */\n\n\n    const arrayRemoveMatch = (toArray, frommArray) => {\n      return toArray.filter((value, index) => {\n        return frommArray.indexOf(value) < 0;\n      });\n    };\n\n    const getFormData = $form => {\n      const data = {};\n\n      if (!$form instanceof HTMLFormElement) {\n        return data;\n      }\n\n      const formData = new FormData($form);\n      formData.forEach((value, key) => {\n        if (!Object.prototype.hasOwnProperty.call(Object, key)) {\n          data[key] = value;\n          return;\n        }\n\n        if (!Array.isArray(data[key])) {\n          data[key] = [data[key]];\n        }\n\n        data[key].push(value);\n      });\n      return data;\n    };\n    /**\r\n     * getFunctionParameterList\r\n     * @description convert parameter string to arrary\r\n     * eg. '(\"a\",\"b\",\"c\")' > [\"a\",\"b\",\"c\"]\r\n     * @param {string} str\r\n     * @return {array} paramlist\r\n     */\n\n\n    const getFunctionParameterList = str => {\n      if (!str || str.length > maxDatakeyLength) {\n        return;\n      }\n\n      let paramlist = str.match(REGEX.FUNCTION_PARAM);\n\n      if (paramlist && paramlist[1]) {\n        paramlist = paramlist[1].split(',');\n        paramlist.forEach(function (v, i) {\n          paramlist[i] = v.trim();\n        });\n      }\n\n      return paramlist;\n    };\n\n    const extractFilterList = cacheData => {\n      if (!cacheData || !cacheData.dataKey || cacheData.dataKey.length > maxDatakeyLength) {\n        return cacheData;\n      }\n\n      const filterList = cacheData.dataKey.split(REGEX.PIPE);\n      let isOnceIndex;\n      cacheData.dataKey = filterList[0].trim();\n\n      if (filterList.length > 1) {\n        filterList.shift(0);\n        filterList.forEach(function (v, i) {\n          filterList[i] = v.trim();\n\n          if (filterList[i] === constants.filters.ONCE) {\n            cacheData.isOnce = true;\n            isOnceIndex = i;\n          }\n        }); // don't store filter 'once' - because it is internal logic not a property from viewModel\n\n        if (isOnceIndex >= 0) {\n          filterList.splice(isOnceIndex, 1);\n        }\n\n        cacheData.filters = filterList;\n      }\n\n      return cacheData;\n    };\n\n    const invertObj = sourceObj => {\n      return Object.keys(sourceObj).reduce(function (obj, key) {\n        obj[sourceObj[key]] = key;\n        return obj;\n      }, {});\n    };\n\n    const createDeferredObj = () => {\n      const dfObj = {};\n      dfObj.promise = new Promise((resolve, reject) => {\n        dfObj.resolve = resolve;\n        dfObj.reject = reject;\n      });\n      return dfObj;\n    };\n    /**\r\n     * debounce\r\n     * @description decorate a function to be debounce using requestAnimationFrame\r\n     * @param {function} fn\r\n     * @param {context} ctx\r\n     * @return {function}\r\n     */\n\n\n    const debounceRaf = (fn, ctx = null) => {\n      return function (fn, ctx) {\n        let dfObj = createDeferredObj();\n        let rafId = 0; // return decorated fn\n\n        return function () {\n          /* eslint-disable prefer-rest-params */\n          const args = Array.from ? Array.from(arguments) : Array.prototype.slice.call(arguments);\n          window.cancelAnimationFrame(rafId);\n          rafId = window.requestAnimationFrame(() => {\n            try {\n              // fn is Binder.render function\n              fn.apply(ctx, args); // dfObj.resolve is function provided in .then promise chain\n              // ctx is the current component\n\n              dfObj.resolve(ctx);\n            } catch (err) {\n              console.error('error in rendering: ', err);\n              dfObj.reject(err);\n            } // reset dfObj - otherwise then callbacks will not be in execution order\n            // example:\n            // myApp.render().then(function(){console.log('ok1')});\n            // myApp.render().then(function(){console.log('ok2')});\n            // myApp.render().then(function(){console.log('ok3')});\n            // >> ok1, ok2, ok3\n\n\n            dfObj = createDeferredObj();\n            window.cancelAnimationFrame(rafId);\n          });\n          return dfObj.promise;\n        };\n      }(fn, ctx);\n    };\n    /**\r\n     * extend\r\n     * @param {boolean} isDeepMerge\r\n     * @param {object} target\r\n     * @param {object} sources\r\n     * @return {object} merged object\r\n     */\n\n\n    const extend = (isDeepMerge = false, target, ...sources) => {\n      if (!sources.length) {\n        return target;\n      }\n\n      const source = sources.shift();\n\n      if (source === undefined) {\n        return target;\n      }\n\n      if (!isDeepMerge) {\n        return Object.assign(target, ...sources);\n      }\n\n      if (isMergebleObject(target) && isMergebleObject(source)) {\n        Object.keys(source).forEach(key => {\n          if (isMergebleObject(source[key])) {\n            if (!target[key]) {\n              target[key] = {};\n            }\n\n            extend(target[key], source[key]);\n          } else {\n            target[key] = source[key];\n          }\n        });\n      }\n\n      return extend(true, target, ...sources);\n    };\n\n    const each = (obj, fn) => {\n      if (typeof obj !== 'object' || typeof fn !== 'function') {\n        return;\n      }\n\n      let keys = [];\n      let keysLength = 0;\n      const isArrayObj = isArray(obj);\n      let key;\n      let value;\n      let i = 0;\n\n      if (isArrayObj) {\n        keysLength = obj.length;\n      } else if (isJsObject(obj)) {\n        keys = Object.keys(obj);\n        keysLength = keys.length;\n      } else {\n        throw new TypeError('Object is not an array or object');\n      }\n\n      for (i = 0; i < keysLength; i += 1) {\n        if (isArrayObj) {\n          key = i;\n          value = obj[i];\n        } else {\n          key = keys[i];\n          value = obj[key];\n        }\n\n        fn(key, value);\n      }\n    };\n\n    const isMergebleObject = item => {\n      return isJsObject(item) && !isArray(item);\n    };\n    /**\r\n     * cloneDomNode\r\n     * @param {object} element\r\n     * @return {object} cloned element\r\n     * @description helper function to clone node\r\n     */\n\n\n    const cloneDomNode = element => {\n      return element.cloneNode(true);\n    };\n    /**\r\n     * insertAfter\r\n     * @param {object} parentNode\r\n     * @param {object} newNode\r\n     * @param {object} referenceNode\r\n     * @return {object} node\r\n     * @description helper function to insert new node before the reference node\r\n     */\n\n\n    const insertAfter = (parentNode, newNode, referenceNode) => {\n      const refNextElement = referenceNode && referenceNode.nextSibling ? referenceNode.nextSibling : null;\n      return parentNode.insertBefore(newNode, refNextElement);\n    };\n\n    const resolveViewModelContext = (viewModel, datakey) => {\n      let ret = viewModel;\n\n      if (typeof datakey !== 'string') {\n        return ret;\n      }\n\n      const bindingDataContext = datakey.split('.');\n\n      if (bindingDataContext.length > 1) {\n        if (bindingDataContext[0] === bindingDataReference.rootDataKey) {\n          ret = viewModel[bindingDataReference.rootDataKey] || viewModel;\n        } else if (bindingDataContext[0] === bindingDataReference.currentData) {\n          ret = viewModel[bindingDataReference.currentData] || viewModel;\n        }\n      }\n\n      return ret;\n    };\n\n    const resolveParamList = (viewModel, paramList) => {\n      if (!viewModel || !isArray(paramList)) {\n        return;\n      }\n\n      return paramList.map(param => {\n        param = param.trim();\n\n        if (param === bindingDataReference.currentIndex) {\n          // convert '$index' to value\n          param = viewModel[bindingDataReference.currentIndex];\n        } else if (param === bindingDataReference.currentData) {\n          // convert '$data' to value or current viewModel\n          param = viewModel[bindingDataReference.currentData] || viewModel;\n        } else if (param === bindingDataReference.rootDataKey) {\n          // convert '$root' to root viewModel\n          param = viewModel[bindingDataReference.rootDataKey] || viewModel;\n        }\n\n        return param;\n      });\n    };\n\n    const removeElement = el => {\n      if (el && el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n    };\n\n    const emptyElement = node => {\n      if (node && node.firstChild) {\n        while (node.firstChild) {\n          node.removeChild(node.firstChild);\n        }\n      }\n\n      return node;\n    };\n\n    const throwErrorMessage = (err = null, errorMessage = '') => {\n      const message = err && err.message ? err.message : errorMessage;\n\n      if (typeof console.error === 'function') {\n        return console.error(message);\n      }\n\n      return console.log(message);\n    };\n    /**\r\n     * parseBindingObjectString\r\n     * @description parse bining object string to object with value always stringify\r\n     * @param {string} str - eg '{ id: $data.id, name: $data.name }'\r\n     * @return {object} - eg { id: '$data.id', name: '$data.name'}\r\n     */\n\n\n    const parseBindingObjectString = (str = '') => {\n      let objectLiteralString = str.trim();\n      const ret = {};\n\n      if (!REGEX.OBJECT_LITERAL.test(str)) {\n        return null;\n      } // clearn up line breaks and remove first { character\n\n\n      objectLiteralString = objectLiteralString.replace(REGEX.LINE_BREAKS_TABS, '').substring(1); // remove last } character\n\n      objectLiteralString = objectLiteralString.substring(0, objectLiteralString.length - 1);\n      objectLiteralString.split(',').forEach(item => {\n        const keyVal = item.trim(); // ignore if last empty item - eg split last comma in object literal\n\n        if (keyVal) {\n          const prop = keyVal.split(':');\n          const key = prop[0].trim();\n          ret[key] = `${prop[1]}`.trim();\n        }\n      });\n      return ret;\n    };\n\n    let bindingAttrsMap;\n    /**\n     * walkDOM\n     * @description by Douglas Crockford - walk each DOM node and calls provided callback function\n     * start walk from firstChild\n     * @param {object} node\n     * @param {function} func\n     */\n\n    const walkDOM = (node, func) => {\n      let parseChildNode = true;\n      node = node.firstElementChild;\n\n      while (node) {\n        parseChildNode = func(node);\n\n        if (parseChildNode) {\n          walkDOM(node, func);\n        }\n\n        node = node.nextElementSibling;\n      }\n    };\n\n    const getAttributesObject = node => {\n      const ret = {};\n      Array.prototype.slice.call(node.attributes).forEach(item => {\n        ret[item.name] = item.value;\n      });\n      return ret;\n    };\n\n    const checkSkipChildParseBindings = (attrObj = {}, bindingAttrs) => {\n      return [bindingAttrs.forOf, bindingAttrs.if, bindingAttrs.case, bindingAttrs.default].filter(type => {\n        return typeof attrObj[type] !== 'undefined';\n      });\n    };\n\n    const rootSkipCheck = node => {\n      return node.tagName === 'SVG';\n    };\n\n    const defaultSkipCheck = (node, bindingAttrs) => {\n      return node.tagName === 'SVG' || node.hasAttribute(bindingAttrs.comp);\n    };\n\n    const populateBindingCache = ({\n      node,\n      attrObj,\n      bindingCache,\n      type\n    }) => {\n      let attrValue;\n      let cacheData;\n\n      if (bindingAttrsMap && bindingAttrsMap[type] && typeof attrObj[type] !== 'undefined') {\n        bindingCache[type] = bindingCache[type] || [];\n        attrValue = attrObj[type] || '';\n\n        if (attrValue) {\n          attrValue = attrValue.replace(REGEX.LINE_BREAKS_TABS, '').replace(REGEX.WHITE_SPACES, ' ').trim();\n        }\n\n        cacheData = {\n          el: node,\n          dataKey: attrValue\n        }; // populate cacheData.filters. update filterList first item as dataKey\n\n        cacheData = extractFilterList(cacheData); // populate cacheData.parameters\n        // for store function call parameters eg. '$index', '$root'\n        // useful with DOM for-loop template as reference to binding data\n\n        const paramList = getFunctionParameterList(cacheData.dataKey);\n\n        if (paramList) {\n          cacheData.parameters = paramList;\n          cacheData.dataKey = cacheData.dataKey.replace(REGEX.FUNCTION_PARAM, '').trim();\n        } // store parent array reference to cacheData\n\n\n        cacheData[constants.PARENT_REF] = bindingCache[type];\n        bindingCache[type].push(cacheData);\n      }\n\n      return bindingCache;\n    };\n\n    const createBindingCache = ({\n      rootNode = null,\n      bindingAttrs = {},\n      skipCheck,\n      isRenderedTemplate = false\n    }) => {\n      let bindingCache = {};\n\n      if (!rootNode instanceof window.Node) {\n        throw new TypeError('walkDOM: Expected a DOM node');\n      }\n\n      bindingAttrsMap = bindingAttrsMap || invertObj(bindingAttrs);\n\n      const parseNode = (node, skipNodeCheckFn = defaultSkipCheck) => {\n        let isSkipForOfChild = false;\n\n        if (node.nodeType !== 1 || !node.hasAttributes()) {\n          return true;\n        }\n\n        if (skipNodeCheckFn(node, bindingAttrs) || typeof skipCheck === 'function' && skipCheck(node)) {\n          return false;\n        } // when creating sub bindingCache if is for tmp binding\n        // skip same element that has forOf binding the  forOf is alredy parsed\n\n\n        const attrObj = getAttributesObject(node);\n        const hasSkipChildParseBindings = checkSkipChildParseBindings(attrObj, bindingAttrs);\n        let iterateList = [];\n\n        if (hasSkipChildParseBindings.length) {\n          isSkipForOfChild = true;\n          iterateList = hasSkipChildParseBindings;\n        } else if (isRenderedTemplate && attrObj[bindingAttrs.tmp]) {\n          // skip current node parse if was called by node has template binding and already rendered\n          return true;\n        } else {\n          iterateList = Object.keys(attrObj);\n        }\n\n        iterateList.forEach(key => {\n          // skip for switch case and default bining\n          if (key !== bindingAttrs.case && key !== bindingAttrs.default) {\n            bindingCache = populateBindingCache({\n              node: node,\n              attrObj: attrObj,\n              bindingCache: bindingCache,\n              type: key\n            });\n          }\n        }); // after cache forOf skip parse child nodes\n\n        if (isSkipForOfChild) {\n          return false;\n        }\n\n        return true;\n      };\n\n      if (parseNode(rootNode, rootSkipCheck)) {\n        walkDOM(rootNode, parseNode);\n      }\n\n      return bindingCache;\n    };\n\n    /**\n     * createBindingOption\n     * @param {string} condition\n     * @param {object} opt\n     * @description\n     * generate binding update option object by condition\n     * @return {object} updateOption\n     */\n\n    function createBindingOption(condition = '', opt = {}) {\n      const visualBindingOptions = {\n        templateBinding: false,\n        textBinding: true,\n        cssBinding: true,\n        ifBinding: true,\n        showBinding: true,\n        modelBinding: true,\n        attrBinding: true,\n        forOfBinding: true,\n        switchBinding: true\n      };\n      const eventsBindingOptions = {\n        changeBinding: true,\n        clickBinding: true,\n        dblclickBinding: true,\n        blurBinding: true,\n        focusBinding: true,\n        hoverBinding: true,\n        inputBinding: true,\n        submitBinding: true\n      }; // this is visualBindingOptions but everything false\n      // concrete declear for performance purpose\n\n      const serverRenderedOptions = {\n        templateBinding: false,\n        textBinding: false,\n        cssBinding: false,\n        ifBinding: false,\n        showBinding: false,\n        modelBinding: false,\n        attrBinding: false,\n        forOfBinding: false,\n        switchBinding: false\n      };\n      let updateOption = {};\n\n      switch (condition) {\n        case bindingUpdateConditions.serverRendered:\n          updateOption = extend({}, eventsBindingOptions, serverRenderedOptions, opt);\n          break;\n\n        case bindingUpdateConditions.init:\n          // flag templateBinding to true to render tempalte(s)\n          opt.templateBinding = true;\n          updateOption = extend({}, visualBindingOptions, eventsBindingOptions, opt);\n          break;\n\n        default:\n          // when called again only update visualBinding options\n          updateOption = extend({}, visualBindingOptions, opt);\n      }\n\n      return updateOption;\n    }\n\n    /* eslint-disable no-invalid-this */\n    /**\n     * blurBinding\n     * DOM decleartive on blur event binding\n     * event handler bind to viewModel method according to the DOM attribute\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {boolean} forceRender\n     */\n\n    const hoverBinding = (cache, viewModel, bindingAttrs, forceRender) => {\n      const handlerName = cache.dataKey;\n      let paramList = cache.parameters;\n      const inHandlerName = bindingDataReference.mouseEnterHandlerName;\n      const outHandlerName = bindingDataReference.mouseLeaveHandlerName;\n      let viewModelContext;\n      const APP = viewModel.APP || viewModel.$root.APP;\n      cache.elementData = cache.elementData || {}; // TODO: check what is APP.$rootElement.contains(cache.el)\n\n      if (!handlerName || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      const handlers = getViewModelValue(viewModel, handlerName);\n\n      if (handlers && typeof handlers[inHandlerName] === 'function' && typeof handlers[outHandlerName] === 'function') {\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\n\n        function onMouseEnterHandler(e) {\n          const args = [e, cache.el].concat(paramList);\n          handlers[inHandlerName].apply(viewModelContext, args);\n        }\n\n        function onMouseLeaveHandler(e) {\n          const args = [e, cache.el].concat(paramList);\n          handlers[outHandlerName].apply(viewModelContext, args);\n        }\n\n        cache.el.removeEventListener('mouseenter', onMouseEnterHandler, false);\n        cache.el.removeEventListener('mouseleave', onMouseLeaveHandler, false);\n        cache.el.addEventListener('mouseenter', onMouseEnterHandler, false);\n        cache.el.addEventListener('mouseleave', onMouseLeaveHandler, false);\n      }\n    };\n\n    /**\n     * _escape\n     * @description\n     * https://github.com/lodash/lodash/blob/master/escape.js\n     */\n    function baseToString(value) {\n      if (typeof value == 'string') {\n        return value;\n      }\n\n      return value == null ? '' : `${value}`;\n    }\n    /** Used to match HTML entities and HTML characters. */\n\n\n    const reUnescapedHtml = /[&<>\"'`]/g;\n    const reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n    /** Used to map characters to HTML entities. */\n\n    const htmlEscapes = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '`': '&#96;'\n    };\n    /**\n       * escapeHtmlChar\n       * @description convert characters to HTML entities.\n       * @private\n       * @param {string} chr The matched character to escape.\n       * @return {string} Returns the escaped character.\n       */\n\n    function escapeHtmlChar(chr) {\n      return htmlEscapes[chr];\n    }\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', \"'\", and \"\\`\", in `string` to\n     * their corresponding HTML entities.\n     * @param {string} string\n     * @return {string} string\n     */\n\n\n    function escape(string) {\n      // Reset `lastIndex` because in IE < 9 `String#replace` does not.\n      string = baseToString(string);\n      return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;\n    }\n\n    /* eslint-disable no-invalid-this */\n    /**\n     * changeBinding\n     * @description input element on change event binding. DOM -> viewModel update\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {boolean} forceRender\n     */\n\n    const changeBinding = ({\n      cache,\n      viewModel,\n      bindingAttrs,\n      forceRender,\n      type = 'change'\n    }) => {\n      const handlerName = cache.dataKey;\n      let paramList = cache.parameters;\n      const modelDataKey = cache.el.getAttribute(bindingAttrs.model);\n      let newValue = '';\n      let oldValue = '';\n      let viewModelContext;\n      const APP = viewModel.APP || viewModel.$root.APP;\n\n      if (!handlerName || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      const handlerFn = getViewModelValue(viewModel, handlerName);\n\n      if (typeof handlerFn === 'function') {\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\n\n        function changeHandler(e) {\n          const $this = this;\n          const isCheckbox = $this.type === 'checkbox';\n          newValue = isCheckbox ? $this.checked : escape($this.value); // set data to viewModel\n\n          if (modelDataKey) {\n            oldValue = getViewModelValue(viewModel, modelDataKey);\n            setViewModelValue(viewModel, modelDataKey, newValue);\n          }\n\n          const args = [e, e.currentTarget, newValue, oldValue].concat(paramList);\n          handlerFn.apply(viewModelContext, args);\n          oldValue = newValue;\n        } // assing on change event\n\n\n        cache.el.removeEventListener(type, changeHandler, false);\n        cache.el.addEventListener(type, changeHandler, false);\n      }\n    };\n\n    /**\n     * modelBinding\n     * @description input element data binding. viewModel -> DOM update\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {boolean} forceRender\n     */\n\n    const modelBinding = (cache, viewModel, bindingAttrs, forceRender) => {\n      const dataKey = cache.dataKey;\n      let newValue = '';\n      const APP = viewModel.APP || viewModel.$root.APP;\n\n      if (!dataKey || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      newValue = getViewModelValue(viewModel, dataKey);\n\n      if (typeof newValue !== 'undefined' && newValue !== null) {\n        const $element = cache.el;\n        const isCheckbox = $element.type === 'checkbox';\n        const isRadio = $element.type === 'radio';\n        const inputName = $element.name;\n        const $radioGroup = isRadio ? APP.$rootElement.querySelectorAll(`input[name=\"${inputName}\"]`) : [];\n        const oldValue = isCheckbox ? $element.checked : $element.value; // update element value\n\n        if (newValue !== oldValue) {\n          if (isCheckbox) {\n            $element.checked = Boolean(newValue);\n          } else if (isRadio) {\n            let i = 0;\n            const radioGroupLength = $radioGroup.length;\n\n            for (i = 0; i < radioGroupLength; i += 1) {\n              if ($radioGroup[i].value === newValue) {\n                $radioGroup[i].checked = true;\n                break;\n              }\n            }\n          } else {\n            $element.value = newValue;\n          }\n        }\n      }\n    };\n\n    /**\n     * textBinding\n     * * @description\n     * DOM decleartive text binding update dom textnode with viewModel data\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {boolean} forceRender\n     */\n\n    const textBinding = (cache, viewModel, bindingAttrs, forceRender) => {\n      const dataKey = cache.dataKey;\n      const APP = viewModel.APP || viewModel.$root.APP; // NOTE: this doesn't work for for-of, if and switch bindings because element was not in DOM\n\n      if (!dataKey || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      const newValue = getViewModelPropValue(viewModel, cache);\n      const oldValue = cache.el.textContent;\n\n      if (typeof newValue !== 'undefined' && typeof newValue !== 'object' && newValue !== null) {\n        if (newValue !== oldValue) {\n          cache.el.textContent = newValue;\n        }\n      }\n    };\n\n    /**\n     * showBinding\n     * @description\n     * DOM decleartive show binding. Make binding show/hide according to viewModel data (boolean)\n     * viewModel data can function but must return boolean\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     */\n\n    const showBinding = (cache, viewModel, bindingAttrs) => {\n      const dataKey = cache.dataKey;\n      let currentInlineSytle = {};\n      let currentInlineDisplaySytle = '';\n      let shouldShow = true;\n\n      if (!dataKey) {\n        return;\n      }\n\n      cache.elementData = cache.elementData || {};\n      const oldShowStatus = cache.elementData.viewModelPropValue; // store current element display default style once only\n\n      if (typeof cache.elementData.displayStyle === 'undefined' || typeof cache.elementData.computedStyle === 'undefined') {\n        currentInlineSytle = cache.el.style;\n        currentInlineDisplaySytle = currentInlineSytle.display; // use current inline style if defined\n\n        if (currentInlineDisplaySytle) {\n          // set to 'block' if is 'none'\n          cache.elementData.displayStyle = currentInlineDisplaySytle === 'none' ? 'block' : currentInlineDisplaySytle;\n          cache.elementData.computedStyle = null;\n        } else {\n          const computeStyle = window.getComputedStyle(cache.el, null).getPropertyValue('display');\n          cache.elementData.displayStyle = null;\n          cache.elementData.computedStyle = computeStyle;\n        }\n      }\n\n      shouldShow = getViewModelPropValue(viewModel, cache); // treat undefined || null as false.\n      // eg if property doesn't exsits in viewModel, it will treat as false to hide element\n\n      shouldShow = Boolean(shouldShow); // reject if nothing changed\n\n      if (oldShowStatus === shouldShow) {\n        return;\n      }\n\n      if (!shouldShow) {\n        if (cache.el.style.display !== 'none') {\n          cache.el.style.setProperty('display', 'none');\n        }\n      } else {\n        if (cache.elementData.computedStyle || cache.el.style.display === 'none') {\n          if (cache.elementData.computedStyle === 'none') {\n            // default display is none in css rule, so use display 'block'\n            cache.el.style.setProperty('display', 'block');\n          } else {\n            // has default displayable type so just remove inline display 'none'\n            if (currentInlineSytle.length > 1) {\n              cache.el.style.removeProperty('display');\n            } else {\n              cache.el.removeAttribute('style');\n            }\n          }\n        } else {\n          // element default display was inline style, so restore it\n          cache.el.style.setProperty('display', cache.elementData.displayStyle);\n        }\n      } // store new show status\n\n\n      cache.elementData.viewModelPropValue = shouldShow;\n    };\n\n    /**\n     * cssBinding\n     * @description\n     * DOM decleartive css binding. update classlist.\n     * viewModel data can function but must return JSOL.\n     * added css class if value is true\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {boolean} forceRender\n     */\n\n    const cssBinding = (cache, viewModel, bindingAttrs, forceRender) => {\n      const dataKey = cache.dataKey;\n      const APP = viewModel.APP || viewModel.$root.APP;\n\n      if (!dataKey || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      cache.elementData = cache.elementData || {};\n      cache.elementData.viewModelPropValue = cache.elementData.viewModelPropValue || '';\n      const oldCssList = cache.elementData.viewModelPropValue;\n      let newCssList = '';\n      const vmCssListObj = getViewModelPropValue(viewModel, cache);\n      let vmCssListArray = [];\n      let isViewDataObject = false;\n      let isViewDataString = false;\n      let cssList = [];\n\n      if (typeof vmCssListObj === 'string') {\n        isViewDataString = true;\n      } else if (isPlainObject(vmCssListObj)) {\n        isViewDataObject = true;\n      } else {\n        // reject if vmCssListObj is not an object or string\n        return;\n      }\n\n      if (isViewDataObject) {\n        newCssList = JSON.stringify(vmCssListObj);\n      } else {\n        newCssList = vmCssListObj.replace(/\\s\\s+/g, ' ').trim();\n        vmCssListArray = newCssList.split(' ');\n      } // reject if nothing changed\n\n\n      if (oldCssList === newCssList) {\n        return;\n      } // get current css classes from element\n\n\n      const domCssList = cache.el.classList; // clone domCssList as new array\n\n      const domCssListLength = domCssList.length;\n\n      for (let i = 0; i < domCssListLength; i += 1) {\n        cssList.push(domCssList[i]);\n      }\n\n      if (isViewDataObject) {\n        each(vmCssListObj, function (k, v) {\n          const i = cssList.indexOf(k);\n\n          if (v === true) {\n            cssList.push(k);\n          } else if (i !== -1) {\n            cssList.splice(i, 1);\n          }\n        });\n      } else if (isViewDataString) {\n        // remove oldCssList items from cssList\n        cssList = arrayRemoveMatch(cssList, oldCssList);\n        cssList = cssList.concat(vmCssListArray);\n      } // unique cssList array\n\n\n      cssList = cssList.filter((v, i, a) => {\n        return a.indexOf(v) === i;\n      });\n      cssList = cssList.join(' '); // update element data\n\n      cache.elementData.viewModelPropValue = newCssList; // replace all css classes\n\n      cache.el.setAttribute('class', cssList);\n    };\n\n    /**\n     * attrBinding\n     * @description\n     * DOM decleartive attr binding. update elenment attributes\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     */\n\n    const attrBinding = (cache = {}, viewModel) => {\n      if (!cache.dataKey) {\n        return;\n      } // check if Object Literal String style dataKey\n\n\n      const isObjLiteralStr = isObjectLiteralString(cache.dataKey); // resolve vmAttrObj, when Object Literal String style if will be object without resolve each value\n      // otherwise, resolve value from viewModel\n\n      const vmAttrObj = isObjLiteralStr ? parseBindingObjectString(cache.dataKey) : getViewModelPropValue(viewModel, cache); // vmAttrObj must be a plain object\n\n      if (!isPlainObject(vmAttrObj)) {\n        return;\n      } // populate cache.elementData if not exits\n      // check and set default cache.elementData.viewModelPropValue\n\n\n      cache.elementData = cache.elementData || {};\n      cache.elementData.viewModelPropValue = cache.elementData.viewModelPropValue || {}; // start diff comparison\n      // reject if nothing changed by comparing\n      // cache.elementData.viewModelPropValue (previous render) vs vmAttrObj(current render)\n\n      if (JSON.stringify(cache.elementData.viewModelPropValue) === JSON.stringify(vmAttrObj)) {\n        return;\n      }\n\n      if (isObjLiteralStr) {\n        // resolve each value in vmAttrObj\n        each(vmAttrObj, (key, value) => {\n          // resolve value from viewModel including $data and $root\n          // from viewModel.$data or viewModel.$root\n          vmAttrObj[key] = getViewModelPropValue(viewModel, {\n            dataKey: value\n          });\n        });\n      } // shortcut for reading cache.elementData.viewModelPropValue\n\n\n      const oldAttrObj = cache.elementData.viewModelPropValue; // start set element attribute - oldAttrObj is empty meaning no previous render\n\n      if (isEmptyObject(oldAttrObj)) {\n        each(vmAttrObj, (key, value) => {\n          if (typeof value !== 'undefined') {\n            cache.el.setAttribute(key, value); // populate cache.elementData.viewModelPropValue for future comparison\n\n            if (!isObjLiteralStr) {\n              cache.elementData.viewModelPropValue[key] = value;\n            }\n          }\n        });\n      } else {\n        // loop oldAttrObj, remove attribute not present in current vmAttrObj\n        each(oldAttrObj, (key, value) => {\n          if (typeof vmAttrObj[key] === 'undefined') {\n            cache.el.removeAttribute(key);\n          }\n        }); // loop vmAttrObj, set attribute not present in oldAttrObj\n\n        each(vmAttrObj, (key, value) => {\n          if (typeof value !== 'undefined') {\n            if (oldAttrObj[key] !== vmAttrObj[key]) {\n              cache.el.setAttribute(key, vmAttrObj[key]); // populate cache.elementData.viewModelPropValue for future comparison\n\n              if (!isObjLiteralStr) {\n                cache.elementData.viewModelPropValue[key] = value;\n              }\n            }\n          }\n        });\n      } // for object literal style binding\n      // set viewModelPropValue for future diff comaprison\n      // note: vmAttrObj is a not fully resolve object, each value is still string unresloved\n\n\n      if (isObjLiteralStr) {\n        cache.elementData.viewModelPropValue = extend({}, vmAttrObj);\n      }\n    };\n\n    let $domFragment = null;\n    let $templateRoot = null;\n    let nestTemplatesCount = 0;\n    /**\n     * getTemplateString\n     * @description get Template tag innerHTML string\n     * @param {string} id\n     * @return {string} rendered html string\n     */\n\n    const getTemplateString = id => {\n      const templateElement = document.getElementById(id);\n      return templateElement ? templateElement.innerHTML : '';\n    };\n    /**\n     * renderTemplate\n     * @description\n     * get template setting from DOM attribute then call compileTemplate\n     * to render and append to target DOM\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     * @param {object} elementCache\n     */\n\n\n    const renderTemplate = (cache, viewModel, bindingAttrs, elementCache) => {\n      const settings = typeof cache.dataKey === 'string' ? parseStringToJson(cache.dataKey) : cache.dataKey;\n      let viewData = settings.data;\n      const isAppend = settings.append;\n      const isPrepend = settings.prepend;\n      let $currentElement;\n      cache.dataKey = settings;\n      viewData = typeof viewData === 'undefined' || viewData === '$root' ? viewModel : getViewModelPropValue(viewModel, {\n        dataKey: settings.data,\n        parameters: cache.parameters\n      });\n\n      if (!viewData) {\n        return;\n      }\n\n      const $element = cache.el;\n      const $index = typeof viewModel.$index !== 'undefined' ? viewModel.$index : $element.getAttribute(dataIndexAttr);\n\n      if (typeof $index !== 'undefined') {\n        viewData.$index = $index;\n      }\n\n      $domFragment = $domFragment || document.createDocumentFragment();\n      $templateRoot = $templateRoot || $element;\n      const htmlString = getTemplateString(settings.id);\n      const htmlFragment = createHtmlFragment(htmlString); // append rendered html\n\n      if (!$domFragment.childNodes.length) {\n        // domFragment should be empty in first run\n        $currentElement = $domFragment; // copy of $domFragment for later find nested template check\n\n        $domFragment.appendChild(htmlFragment);\n      } else {\n        // during recursive run keep append to current fragment\n        $currentElement = $element; // reset to current nested template element\n\n        if (!isAppend && !isPrepend) {\n          $currentElement = emptyElement($currentElement);\n        }\n\n        if (isPrepend) {\n          $currentElement.insertBefore(htmlFragment, $currentElement.firstChild);\n        } else {\n          $currentElement.appendChild(htmlFragment);\n        }\n      } // check if there are nested template then recurisive render them\n\n\n      const $nestedTemplates = $currentElement.querySelectorAll('[' + bindingAttrs.tmp + ']');\n      const nestedTemplatesLength = $nestedTemplates.length;\n\n      if (nestedTemplatesLength) {\n        nestTemplatesCount += nestedTemplatesLength;\n\n        for (let i = 0; i < nestedTemplatesLength; i += 1) {\n          const thisTemplateCache = {\n            el: $nestedTemplates[i],\n            dataKey: $nestedTemplates[i].getAttribute(bindingAttrs.tmp)\n          };\n          elementCache[bindingAttrs.tmp].push(thisTemplateCache); // recursive template render\n\n          renderTemplate(thisTemplateCache, viewModel, bindingAttrs, elementCache);\n          nestTemplatesCount -= 1;\n        }\n      } // no more nested tempalted to render, start to append $domFragment into $templateRoot\n\n\n      if (nestTemplatesCount === 0) {\n        // append to DOM once\n        if (!isAppend && !isPrepend) {\n          $templateRoot = emptyElement($templateRoot);\n        }\n\n        if (isPrepend) {\n          $templateRoot.insertBefore($domFragment, $templateRoot.firstChild);\n        } else {\n          $templateRoot.appendChild($domFragment);\n        } // clear cached fragment\n\n\n        $domFragment = $templateRoot = null; // trigger callback if provided\n\n        if (typeof viewModel.afterTemplateRender === 'function') {\n          viewModel.afterTemplateRender(viewData);\n        }\n      }\n    };\n\n    const renderTemplatesBinding = ({\n      ctx,\n      elementCache,\n      updateOption,\n      bindingAttrs,\n      viewModel\n    }) => {\n      if (!elementCache || !bindingAttrs) {\n        return false;\n      } // render and apply binding to template(s) and forOf DOM\n\n\n      if (elementCache[bindingAttrs.tmp] && elementCache[bindingAttrs.tmp].length) {\n        // when re-render call with {templateBinding: true}\n        // template and nested templates\n        if (updateOption.templateBinding) {\n          // overwrite updateOption with 'init' bindingUpdateConditions\n          updateOption = createBindingOption(bindingUpdateConditions.init);\n          elementCache[bindingAttrs.tmp].forEach($element => {\n            renderTemplate($element, viewModel, bindingAttrs, elementCache);\n          }); // update cache after all template(s) rendered\n\n          ctx.updateElementCache({\n            templateCache: true,\n            elementCache: elementCache,\n            isRenderedTemplates: true\n          });\n        } // enforce render even element is not in DOM tree\n\n\n        updateOption.forceRender = true; // apply bindings to rendered templates element\n\n        elementCache[bindingAttrs.tmp].forEach(cache => {\n          applyBinding({\n            elementCache: cache.bindingCache,\n            updateOption: updateOption,\n            bindingAttrs: bindingAttrs,\n            viewModel: viewModel\n          });\n        });\n      }\n\n      return true;\n    };\n\n    /**\n     * renderIteration\n     * @param {object} opt\n     * @description\n     * render element's binding by supplied elementCache\n     * This function is desidned for FoOf, If, switch bindings\n     */\n\n    const renderIteration = ({\n      elementCache,\n      iterationVm,\n      bindingAttrs,\n      isRegenerate\n    }) => {\n      const bindingUpdateOption = isRegenerate ? createBindingOption(bindingUpdateConditions.init) : createBindingOption(); // enforce render even element is not in DOM tree\n\n      bindingUpdateOption.forceRender = true; // render and apply binding to template(s)\n      // this is an share function therefore passing current APP 'this' context\n      // viewModel is a dynamic generated iterationVm\n\n      renderTemplatesBinding({\n        ctx: iterationVm.$root ? iterationVm.$root.APP : iterationVm.APP,\n        elementCache: elementCache,\n        updateOption: bindingUpdateOption,\n        bindingAttrs: bindingAttrs,\n        viewModel: iterationVm\n      });\n      applyBinding({\n        elementCache: elementCache,\n        updateOption: bindingUpdateOption,\n        bindingAttrs: bindingAttrs,\n        viewModel: iterationVm\n      });\n    };\n\n    /* eslint-disable no-invalid-this */\n\n    const createClonedElementCache = bindingData => {\n      const clonedElement = bindingData.el.cloneNode(true);\n      bindingData.fragment = document.createDocumentFragment();\n      bindingData.fragment.appendChild(clonedElement);\n      return bindingData;\n    };\n\n    const setCommentPrefix = bindingData => {\n      if (!bindingData || !bindingData.type) {\n        return bindingData;\n      }\n\n      let commentPrefix$1 = '';\n      const dataKeyMarker = bindingData.dataKey ? bindingData.dataKey.replace(REGEX.WHITE_SPACES, '_') : '';\n\n      switch (bindingData.type) {\n        case bindingAttrs$1.forOf:\n          commentPrefix$1 = commentPrefix.forOf;\n          break;\n\n        case bindingAttrs$1.if:\n          commentPrefix$1 = commentPrefix.if;\n          break;\n\n        case bindingAttrs$1.case:\n          commentPrefix$1 = commentPrefix.case;\n          break;\n\n        case bindingAttrs$1.default:\n          commentPrefix$1 = commentPrefix.default;\n          break;\n      }\n\n      bindingData.commentPrefix = commentPrefix$1 + dataKeyMarker;\n      return bindingData;\n    };\n    /**\n     * setDocRangeEndAfter\n     * @param {object} node\n     * @param {object} bindingData\n     * @description\n     * recursive execution to find last wrapping comment node\n     * and set as bindingData.docRange.setEndAfter\n     * if not found deleteContents will has no operation\n     * @return {undefined}\n     */\n\n\n    const setDocRangeEndAfter = (node, bindingData) => {\n      if (!bindingData.commentPrefix) {\n        setCommentPrefix(bindingData);\n      }\n\n      const startTextContent = bindingData.commentPrefix;\n      const endTextContent = startTextContent + commentSuffix;\n      node = node.nextSibling; // check last wrap comment node\n\n      if (node) {\n        if (node.nodeType === 8 && node.textContent === endTextContent) {\n          return bindingData.docRange.setEndBefore(node);\n        }\n\n        setDocRangeEndAfter(node, bindingData);\n      }\n    };\n    /**\n     * wrapCommentAround\n     * @param {object} bindingData\n     * @param {Node} node\n     * @return {object} DOM fragment\n     * @description\n     * wrap frament with comment node\n     */\n\n\n    const wrapCommentAround = (bindingData, node) => {\n      let prefix = '';\n\n      if (!bindingData.commentPrefix) {\n        setCommentPrefix(bindingData);\n      }\n\n      prefix = bindingData.commentPrefix;\n      const commentBegin = document.createComment(prefix);\n      const commentEnd = document.createComment(prefix + commentSuffix); // document fragment - logic for ForOf binding\n      // check node.parentNode because node could be from cache and no longer in DOM\n\n      if (node.nodeType === 11) {\n        node.insertBefore(commentBegin, node.firstChild);\n        node.appendChild(commentEnd);\n      } else if (node.parentNode) {\n        node.parentNode.insertBefore(commentBegin, node);\n        insertAfter(node.parentNode, commentEnd, node); // update bindingData details\n\n        bindingData.previousNonTemplateElement = node.previousSibling;\n        bindingData.nextNonTemplateElement = node.nextSibling;\n        bindingData.parentElement = node.previousSibling.parentElement;\n      }\n\n      return node;\n    };\n    /**\n     * removeElemnetsByCommentWrap\n     * @param {object} bindingData\n     * @return {undefined}\n     * @description remove elments by range\n     */\n\n\n    const removeElemnetsByCommentWrap = bindingData => {\n      if (!bindingData.docRange) {\n        bindingData.docRange = document.createRange();\n      }\n\n      try {\n        if (bindingData.previousNonTemplateElement) {\n          // update docRange start and end match the wrapped comment node\n          bindingData.docRange.setStartBefore(bindingData.previousNonTemplateElement.nextSibling);\n          setDocRangeEndAfter(bindingData.previousNonTemplateElement.nextSibling, bindingData);\n        } else {\n          // insert before next non template element\n          bindingData.docRange.setStartBefore(bindingData.parentElement.firstChild);\n          setDocRangeEndAfter(bindingData.parentElement.firstChild, bindingData);\n        }\n      } catch (err) {\n        console.log('error removeElemnetsByCommentWrap: ', err.message);\n      }\n\n      return bindingData.docRange.deleteContents();\n    };\n\n    const insertRenderedElements = (bindingData, fragment) => {\n      // insert rendered fragment after the previousNonTemplateElement\n      if (bindingData.previousNonTemplateElement) {\n        insertAfter(bindingData.parentElement, fragment, bindingData.previousNonTemplateElement);\n      } else {\n        // insert before next non template element\n        if (bindingData.nextNonTemplateElement) {\n          bindingData.parentElement.insertBefore(fragment, bindingData.nextNonTemplateElement);\n        } else if (bindingData.parentElement) {\n          // insert from parent\n          bindingData.parentElement.appendChild(fragment);\n        }\n      }\n    };\n\n    /* eslint-disable no-invalid-this */\n\n    const renderForOfBinding = ({\n      bindingData,\n      viewModel,\n      bindingAttrs\n    }) => {\n      if (!bindingData || !viewModel || !bindingAttrs) {\n        return;\n      }\n\n      let keys;\n      let iterationDataLength;\n      const iterationData = getViewModelPropValue(viewModel, bindingData.iterator);\n      let isRegenerate = false; // check iterationData and set iterationDataLength\n\n      if (isArray(iterationData)) {\n        iterationDataLength = iterationData.length;\n      } else if (isPlainObject(iterationData)) {\n        keys = Object.keys(iterationData);\n        iterationDataLength = keys.length;\n      } else {\n        // throw error but let script contince to run\n        return throwErrorMessage(null, 'iterationData is not an plain object or array');\n      } // flag as pared for-of logic with bindingData.type\n\n\n      if (!bindingData.type) {\n        bindingData.type = bindingAttrs$1.forOf;\n        wrapCommentAround(bindingData, bindingData.el);\n      } // assign forOf internal id to bindingData once\n\n\n      if (typeof bindingData.iterationSize === 'undefined') {\n        // store iterationDataLength\n        bindingData.iterationSize = iterationDataLength; // remove orignal node for-of attributes\n\n        bindingData.el.removeAttribute(bindingAttrs.forOf);\n        isRegenerate = true;\n      } else {\n        // only regenerate cache if iterationDataLength changed\n        isRegenerate = bindingData.iterationSize !== iterationDataLength; // update iterationSize\n\n        bindingData.iterationSize = iterationDataLength;\n      }\n\n      if (!isRegenerate) {\n        bindingData.iterationBindingCache.forEach(function (elementCache, i) {\n          if (!isEmptyObject(elementCache)) {\n            const iterationVm = createIterationViewModel({\n              bindingData: bindingData,\n              viewModel: viewModel,\n              iterationData: iterationData,\n              keys: keys,\n              index: i\n            });\n            renderIteration({\n              elementCache: elementCache,\n              iterationVm: iterationVm,\n              bindingAttrs: bindingAttrs,\n              isRegenerate: false\n            });\n          }\n        });\n        return;\n      } // generate forOfBinding elements into fragment\n\n\n      const fragment = generateForOfElements(bindingData, viewModel, bindingAttrs, iterationData, keys);\n      removeElemnetsByCommentWrap(bindingData); // insert fragment content into DOM\n\n      return insertRenderedElements(bindingData, fragment);\n    };\n    /**\n     * createIterationViewModel\n     * @description\n     * create an virtual viewModel for render binding while in loop iteration\n     * $data is the current data in the loop eg. data in array\n     * $root is point to top level viewModel\n     * $index is the current loop index\n     * @param {*} param0\n     * @return {object} virtual viewModel\n     */\n\n\n    const createIterationViewModel = ({\n      bindingData,\n      viewModel,\n      iterationData,\n      keys,\n      index\n    }) => {\n      const iterationVm = {};\n      iterationVm[bindingData.iterator.alias] = keys ? iterationData[keys[index]] : iterationData[index]; // populate common binding data reference\n\n      iterationVm[bindingDataReference.rootDataKey] = viewModel.$root || viewModel;\n      iterationVm[bindingDataReference.currentData] = iterationVm[bindingData.iterator.alias];\n      iterationVm[bindingDataReference.currentIndex] = index;\n      return iterationVm;\n    };\n\n    const generateForOfElements = (bindingData, viewModel, bindingAttrs, iterationData, keys) => {\n      const fragment = document.createDocumentFragment();\n      const iterationDataLength = bindingData.iterationSize;\n      let clonedItem;\n      let iterationVm;\n      let iterationBindingCache;\n      let i = 0; // create or clear exisitng iterationBindingCache\n\n      if (isArray(bindingData.iterationBindingCache)) {\n        bindingData.iterationBindingCache.length = 0;\n      } else {\n        bindingData.iterationBindingCache = [];\n      } // generate forOf and append to DOM\n\n\n      for (i = 0; i < iterationDataLength; i += 1) {\n        clonedItem = cloneDomNode(bindingData.el); // create bindingCache per iteration\n\n        iterationBindingCache = createBindingCache({\n          rootNode: clonedItem,\n          bindingAttrs: bindingAttrs\n        });\n        bindingData.iterationBindingCache.push(iterationBindingCache);\n\n        if (!isEmptyObject(iterationBindingCache)) {\n          // create an iterationVm match iterator alias\n          iterationVm = createIterationViewModel({\n            bindingData: bindingData,\n            viewModel: viewModel,\n            iterationData: iterationData,\n            keys: keys,\n            index: i\n          });\n          renderIteration({\n            elementCache: bindingData.iterationBindingCache[i],\n            iterationVm: iterationVm,\n            bindingAttrs: bindingAttrs,\n            isRegenerate: true\n          });\n        }\n\n        fragment.appendChild(clonedItem);\n      }\n\n      return fragment;\n    };\n\n    /**\n     * forOfBinding\n     * @description\n     * DOM decleartive for binding.\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     */\n\n    const forOfBinding = (cache, viewModel, bindingAttrs) => {\n      const dataKey = cache.dataKey;\n\n      if (!dataKey || dataKey.length > maxDatakeyLength) {\n        return;\n      }\n\n      if (!cache.iterator) {\n        if (dataKey.length > maxDatakeyLength) {\n          return;\n        } // replace mess spaces with single space\n\n\n        cache.dataKey = cache.dataKey.replace(REGEX.WHITE_SPACES, ' ');\n        const forExpMatch = dataKey.match(REGEX.FOR_OF);\n\n        if (!forExpMatch) {\n          return;\n        }\n\n        cache.iterator = {};\n        cache.iterator.alias = forExpMatch[1].trim();\n\n        if (forExpMatch[2]) {\n          cache.iterator.dataKey = forExpMatch[2].trim();\n          cache.parentElement = cache.el.parentElement;\n          cache.previousNonTemplateElement = cache.el.previousSibling;\n          cache.nextNonTemplateElement = cache.el.nextSibling;\n        }\n      }\n\n      renderForOfBinding({\n        bindingData: cache,\n        viewModel: viewModel,\n        bindingAttrs: bindingAttrs\n      });\n    };\n\n    /**\n     * isTargetDomRemoved\n     * @description check if DOM between 'start' and 'end' comment tag has been removed\n     * @param {object} bindingData\n     * @return {boolean}\n     */\n\n    const isTargetDomRemoved = bindingData => {\n      let ret = false;\n\n      if (bindingData && bindingData.previousNonTemplateElement) {\n        const commentStartTextContent = bindingData.previousNonTemplateElement.textContent;\n        const endCommentTag = bindingData.previousNonTemplateElement.nextSibling;\n\n        if (endCommentTag.nodeType === 8) {\n          if (endCommentTag.textContent === commentStartTextContent + commentSuffix) {\n            ret = true;\n          }\n        }\n      }\n\n      return ret;\n    };\n\n    const renderIfBinding = ({\n      bindingData,\n      viewModel,\n      bindingAttrs\n    }) => {\n      if (!bindingData.fragment) {\n        return;\n      }\n\n      const isDomRemoved = isTargetDomRemoved(bindingData);\n      let rootElement = bindingData.el; // remove current old DOM.\n      // TODO: try preserve DOM\n\n      if (!isDomRemoved && !bindingData.isOnce) {\n        removeIfBinding(bindingData); // use fragment for create iterationBindingCache\n\n        rootElement = bindingData.fragment.firstChild.cloneNode(true);\n      } // walk clonedElement to create iterationBindingCache once\n\n\n      if (!bindingData.iterationBindingCache || !bindingData.hasIterationBindingCache) {\n        bindingData.iterationBindingCache = createBindingCache({\n          rootNode: rootElement,\n          bindingAttrs: bindingAttrs\n        });\n      } // only render if has iterationBindingCache\n      // means has other dataBindings to be render\n\n\n      if (!isEmptyObject(bindingData.iterationBindingCache)) {\n        bindingData.hasIterationBindingCache = true;\n        renderIteration({\n          elementCache: bindingData.iterationBindingCache,\n          iterationVm: viewModel,\n          bindingAttrs: bindingAttrs,\n          isRegenerate: true\n        });\n      } // insert to new rendered DOM\n      // TODO: check unnecessary insertion when DOM is preserved\n\n\n      insertRenderedElements(bindingData, rootElement);\n    };\n\n    const removeIfBinding = bindingData => {\n      removeElemnetsByCommentWrap(bindingData); // remove cache.IterationBindingCache to prevent memory leak\n\n      if (bindingData.hasIterationBindingCache) {\n        delete bindingData.iterationBindingCache;\n        delete bindingData.hasIterationBindingCache;\n      }\n    };\n\n    /**\n     * if-Binding\n     * @description\n     * DOM decleartive for binding.\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     */\n\n    const ifBinding = (cache, viewModel, bindingAttrs) => {\n      const dataKey = cache.dataKey; // isOnce only return if there is no child bindings\n\n      if (!dataKey || cache.isOnce && cache.hasIterationBindingCache === false) {\n        return;\n      }\n\n      cache.elementData = cache.elementData || {};\n      cache.type = cache.type || bindingAttrs$1.if;\n      const oldViewModelProValue = cache.elementData.viewModelPropValue; // getViewModelPropValue could be return undefined or null\n\n      const viewModelPropValue = getViewModelPropValue(viewModel, cache) || false; // do nothing if viewModel value not changed and no child bindings\n\n      if (oldViewModelProValue === viewModelPropValue && !cache.hasIterationBindingCache) {\n        return;\n      }\n\n      const shouldRender = Boolean(viewModelPropValue); // remove this cache from parent array\n\n      if (!shouldRender && cache.isOnce && cache.el.parentNode) {\n        removeElement(cache.el); // delete cache.fragment;\n\n        removeBindingInQueue({\n          viewModel: viewModel,\n          cache: cache\n        });\n        return;\n      } // store new show status\n\n\n      cache.elementData.viewModelPropValue = viewModelPropValue; // only create fragment once\n      // wrap comment tag around\n      // remove if attribute from original element to allow later dataBind parsing\n\n      if (!cache.fragment) {\n        wrapCommentAround(cache, cache.el);\n        cache.el.removeAttribute(bindingAttrs.if);\n        createClonedElementCache(cache);\n      }\n\n      if (!shouldRender) {\n        // remove element\n        removeIfBinding(cache);\n      } else {\n        // render element\n        renderIfBinding({\n          bindingData: cache,\n          viewModel: viewModel,\n          bindingAttrs: bindingAttrs\n        }); // if render once\n        // remove this cache from parent array if no child caches\n\n        if (cache.isOnce && !cache.hasIterationBindingCache) {\n          // delete cache.fragment;\n          removeBindingInQueue({\n            viewModel: viewModel,\n            cache: cache\n          });\n        }\n      }\n    };\n\n    const removeBindingInQueue = ({\n      viewModel,\n      cache\n    }) => {\n      let ret = false;\n\n      if (viewModel.APP.postProcessQueue) {\n        viewModel.APP.postProcessQueue.push(((cache, index) => () => {\n          cache[constants.PARENT_REF].splice(index, 1);\n        })(cache, cache[constants.PARENT_REF].indexOf(cache)));\n        ret = true;\n      }\n\n      return ret;\n    };\n\n    /**\n     * switch-Binding\n     * @description\n     * DOM decleartive switch binding.\n     * switch parent element wrap direct child with case bindings\n     * @param {object} cache\n     * @param {object} viewModel\n     * @param {object} bindingAttrs\n     */\n\n    const switchBinding = (cache, viewModel, bindingAttrs) => {\n      const dataKey = cache.dataKey;\n\n      if (!dataKey) {\n        return;\n      }\n\n      cache.elementData = cache.elementData || {};\n      const newExpression = getViewModelPropValue(viewModel, cache);\n\n      if (newExpression === cache.elementData.viewModelPropValue) {\n        return;\n      }\n\n      cache.elementData.viewModelPropValue = newExpression; // build switch cases if not yet defined\n\n      if (!cache.cases) {\n        const childrenElements = cache.el.children;\n\n        if (!childrenElements.length) {\n          return;\n        }\n\n        cache.cases = [];\n\n        for (let i = 0, elementLength = childrenElements.length; i < elementLength; i += 1) {\n          let caseData = null;\n\n          if (childrenElements[i].hasAttribute(bindingAttrs.case)) {\n            caseData = createCaseData(childrenElements[i], bindingAttrs.case);\n          } else if (childrenElements[i].hasAttribute(bindingAttrs.default)) {\n            caseData = createCaseData(childrenElements[i], bindingAttrs.default);\n            caseData.isDefault = true;\n          } // create fragment by clone node\n          // wrap with comment tag\n\n\n          if (caseData) {\n            wrapCommentAround(caseData, caseData.el); // remove binding attribute for later dataBind parse\n\n            if (caseData.isDefault) {\n              caseData.el.removeAttribute(bindingAttrs.default);\n            } else {\n              caseData.el.removeAttribute(bindingAttrs.case);\n            }\n\n            createClonedElementCache(caseData);\n            cache.cases.push(caseData);\n          }\n        }\n      }\n\n      if (cache.cases.length) {\n        let hasMatch = false; // do switch operation - reuse if binding logic\n\n        for (let j = 0, casesLength = cache.cases.length; j < casesLength; j += 1) {\n          let newCaseValue;\n\n          if (cache.cases[j].dataKey) {\n            // set back to dataKey if nothing found in viewModel\n            newCaseValue = getViewModelPropValue(viewModel, cache.cases[j]) || cache.cases[j].dataKey;\n          }\n\n          if (newCaseValue === cache.elementData.viewModelPropValue || cache.cases[j].isDefault) {\n            hasMatch = true; // render element\n\n            renderIfBinding({\n              bindingData: cache.cases[j],\n              viewModel: viewModel,\n              bindingAttrs: bindingAttrs\n            }); // remove other elements\n\n            removeUnmatchCases(cache.cases, j);\n            break;\n          }\n        } // no match remove all cases\n\n\n        if (!hasMatch) {\n          removeUnmatchCases(cache.cases);\n        }\n      }\n    };\n\n    function removeUnmatchCases(cases, matchedIndex) {\n      cases.forEach((caseData, index) => {\n        if (index !== matchedIndex || typeof matchedIndex === 'undefined') {\n          removeIfBinding(caseData); // remove cache.IterationBindingCache to prevent memory leak\n\n          if (caseData.hasIterationBindingCache) {\n            caseData.iterationBindingCache = null;\n            caseData.hasIterationBindingCache = false;\n          }\n        }\n      });\n    }\n\n    function createCaseData(node, attrName) {\n      const caseData = {\n        el: node,\n        dataKey: node.getAttribute(attrName),\n        type: attrName\n      };\n      return caseData;\n    }\n\n    const createEventBinding = ({\n      cache = {},\n      forceRender = false,\n      type = '',\n      viewModel = {}\n    }) => {\n      const handlerName = cache.dataKey;\n      let paramList = cache.parameters;\n      let viewModelContext;\n      const APP = viewModel.APP || viewModel.$root.APP;\n\n      if (!type || !handlerName || !forceRender && !APP.$rootElement.contains(cache.el)) {\n        return;\n      }\n\n      const handlerFn = getViewModelValue(viewModel, handlerName);\n\n      if (typeof handlerFn === 'function') {\n        viewModelContext = resolveViewModelContext(viewModel, handlerName);\n        paramList = paramList ? resolveParamList(viewModel, paramList) : [];\n\n        const handlerWrap = e => {\n          let formData;\n          let args = [];\n\n          if (type === 'submit') {\n            formData = getFormData(e.currentTarget);\n            args = [e, e.currentTarget, formData].concat(paramList);\n          } else {\n            args = [e, e.currentTarget].concat(paramList);\n          }\n\n          handlerFn.apply(viewModelContext, args);\n        };\n\n        cache.el.removeEventListener(type, handlerWrap, false);\n        cache.el.addEventListener(type, handlerWrap, false);\n      }\n    };\n\n    function applyBinding({\n      ctx,\n      elementCache,\n      updateOption,\n      bindingAttrs,\n      viewModel\n    }) {\n      if (!elementCache || !updateOption) {\n        return;\n      } // the follow binding should be in order for better efficiency\n      // apply forOf Binding\n\n\n      if (updateOption.forOfBinding && elementCache[bindingAttrs.forOf] && elementCache[bindingAttrs.forOf].length) {\n        elementCache[bindingAttrs.forOf].forEach(cache => {\n          forOfBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply attr Binding\n\n\n      if (updateOption.attrBinding && elementCache[bindingAttrs.attr] && elementCache[bindingAttrs.attr].length) {\n        elementCache[bindingAttrs.attr].forEach(cache => {\n          attrBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply if Binding\n\n\n      if (updateOption.ifBinding && elementCache[bindingAttrs.if] && elementCache[bindingAttrs.if].length) {\n        elementCache[bindingAttrs.if].forEach(cache => {\n          ifBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply show Binding\n\n\n      if (updateOption.showBinding && elementCache[bindingAttrs.show] && elementCache[bindingAttrs.show].length) {\n        elementCache[bindingAttrs.show].forEach(cache => {\n          showBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply switch Binding\n\n\n      if (updateOption.switchBinding && elementCache[bindingAttrs.switch] && elementCache[bindingAttrs.switch].length) {\n        elementCache[bindingAttrs.switch].forEach(cache => {\n          switchBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply text binding\n\n\n      if (updateOption.textBinding && elementCache[bindingAttrs.text] && elementCache[bindingAttrs.text].length) {\n        elementCache[bindingAttrs.text].forEach(cache => {\n          textBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply cssBinding\n\n\n      if (updateOption.cssBinding && elementCache[bindingAttrs.css] && elementCache[bindingAttrs.css].length) {\n        elementCache[bindingAttrs.css].forEach(cache => {\n          cssBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply model binding\n\n\n      if (updateOption.modelBinding && elementCache[bindingAttrs.model] && elementCache[bindingAttrs.model].length) {\n        elementCache[bindingAttrs.model].forEach(cache => {\n          modelBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply change binding\n\n\n      if (updateOption.changeBinding && elementCache[bindingAttrs.change] && elementCache[bindingAttrs.change].length) {\n        elementCache[bindingAttrs.change].forEach(cache => {\n          changeBinding({\n            bindingAttrs,\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'change',\n            viewModel\n          });\n        });\n      } // apply submit binding\n\n\n      if (updateOption.submitBinding && elementCache[bindingAttrs.submit] && elementCache[bindingAttrs.submit].length) {\n        elementCache[bindingAttrs.submit].forEach(cache => {\n          createEventBinding({\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'submit',\n            viewModel\n          });\n        });\n      } // apply click binding\n\n\n      if (updateOption.clickBinding && elementCache[bindingAttrs.click] && elementCache[bindingAttrs.click].length) {\n        elementCache[bindingAttrs.click].forEach(cache => {\n          createEventBinding({\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'click',\n            viewModel\n          });\n        });\n      } // apply double click binding\n\n\n      if (updateOption.dblclickBinding && elementCache[bindingAttrs.dblclick] && elementCache[bindingAttrs.dblclick].length) {\n        elementCache[bindingAttrs.dblclick].forEach(cache => {\n          createEventBinding({\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'dblclick',\n            viewModel\n          });\n        });\n      } // apply blur binding\n\n\n      if (updateOption.blurBinding && elementCache[bindingAttrs.blur] && elementCache[bindingAttrs.blur].length) {\n        elementCache[bindingAttrs.blur].forEach(cache => {\n          createEventBinding({\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'blur',\n            viewModel\n          });\n        });\n      } // apply focus binding\n\n\n      if (updateOption.focusBinding && elementCache[bindingAttrs.focus] && elementCache[bindingAttrs.focus].length) {\n        elementCache[bindingAttrs.focus].forEach(cache => {\n          createEventBinding({\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'focus',\n            viewModel\n          });\n        });\n      } // apply hover binding\n\n\n      if (updateOption.hoverBinding && elementCache[bindingAttrs.hover] && elementCache[bindingAttrs.hover].length) {\n        elementCache[bindingAttrs.hover].forEach(cache => {\n          hoverBinding(cache, viewModel, bindingAttrs, updateOption.forceRender);\n        });\n      } // apply input binding - eg html range input\n\n\n      if (updateOption.inputBinding && elementCache[bindingAttrs.input] && elementCache[bindingAttrs.input].length) {\n        elementCache[bindingAttrs.input].forEach(cache => {\n          changeBinding({\n            bindingAttrs,\n            cache,\n            forceRender: updateOption.forceRender,\n            type: 'input',\n            viewModel\n          });\n        });\n      }\n    }\n\n    function postProcess(tasks) {\n      if (!tasks || !tasks.length) {\n        return;\n      }\n\n      each(tasks, (index, task) => {\n        if (typeof task === 'function') {\n          try {\n            task();\n          } catch (err) {\n            throwErrorMessage(err, 'Error postProcess: ' + String(task));\n          }\n        }\n      });\n    }\n\n    /**\n     *  pubSub\n     * @description use jQuery object as pubSub\n     * @example EVENTS object strucure:\n     *  EVENTS = {\n            'EVENT-NAME': [{ 'comp-id': fn }],\n            'EVENT-NAME2': [{ 'comp-id': fn }]\n        };\n     */\n\n    const EVENTS = {};\n\n    const subscribeEvent = (instance = null, eventName = '', fn, isOnce = false) => {\n      if (!instance || !instance.compId || !eventName || typeof fn !== 'function') {\n        return;\n      }\n\n      let subscriber;\n      let isSubscribed = false;\n      eventName = eventName.replace(REGEX.WHITE_SPACES, '');\n      EVENTS[eventName] = EVENTS[eventName] || []; // check if already subscribed and update callback fn\n\n      isSubscribed = EVENTS[eventName].some(subscriber => {\n        if (subscriber[instance.compId]) {\n          subscriber[instance.compId] = fn.bind(instance.viewModel);\n          subscriber.isOnce = isOnce;\n          return true;\n        }\n      }); // push if not yet subscribe\n\n      if (!isSubscribed) {\n        subscriber = {};\n        subscriber[instance.compId] = fn.bind(instance.viewModel);\n        subscriber.isOnce = isOnce;\n        EVENTS[eventName].push(subscriber);\n      }\n    };\n\n    const subscribeEventOnce = (instance = null, eventName = '', fn) => {\n      subscribeEvent(instance, eventName, fn, true);\n    };\n\n    const unsubscribeEvent = (compId = '', eventName = '') => {\n      if (!compId || !eventName) {\n        return;\n      }\n\n      let i = 0;\n      let subscribersLength = 0;\n      let subscriber;\n      eventName = eventName.replace(REGEX.WHITE_SPACES, '');\n\n      if (EVENTS[eventName]) {\n        subscribersLength = EVENTS[eventName].length;\n\n        for (i = 0; i < subscribersLength; i += 1) {\n          subscriber = EVENTS[eventName][i];\n\n          if (subscriber[compId]) {\n            EVENTS[eventName].splice(i, 1);\n            break;\n          }\n        }\n      } // delete the event if no more subscriber\n\n\n      if (!EVENTS[eventName].length) {\n        delete EVENTS[eventName];\n      }\n    };\n    /**\n     * unsubscribeAllEvent\n     * @description unsubscribe all event by compId. eg when a component removed\n     * @param {string} compId\n     */\n\n\n    const unsubscribeAllEvent = (compId = '') => {\n      if (!compId) {\n        return;\n      }\n\n      Object.keys(EVENTS).forEach(eventName => {\n        unsubscribeEvent(compId, eventName);\n      });\n    };\n\n    const publishEvent = (eventName = '', ...args) => {\n      if (!eventName || !EVENTS[eventName]) {\n        return;\n      }\n\n      eventName = eventName.replace(REGEX.WHITE_SPACES, '');\n      EVENTS[eventName].forEach(subscriber => {\n        Object.keys(subscriber).forEach(compId => {\n          if (typeof subscriber[compId] === 'function') {\n            const ret = subscriber[compId](...args);\n\n            if (subscriber.isOnce) {\n              unsubscribeEvent(compId, eventName);\n            }\n\n            return ret;\n          }\n        });\n      });\n    };\n\n    let compIdIndex = 0;\n\n    class Binder {\n      constructor($rootElement, viewModel, bindingAttrs) {\n        if (!$rootElement || $rootElement.nodeType !== 1 || viewModel === null || typeof viewModel !== 'object') {\n          throw new TypeError('$rootElement or viewModel is invalid');\n        }\n\n        this.initRendered = false;\n        this.compId = compIdIndex += 1;\n        this.$rootElement = $rootElement;\n        this.viewModel = viewModel;\n        this.bindingAttrs = bindingAttrs;\n        this.render = debounceRaf(this.render, this);\n        this.isServerRendered = this.$rootElement.getAttribute(serverRenderedAttr) !== null; // inject instance into viewModel\n\n        this.viewModel.APP = this; // add $root pointer to viewModel so binding can be refer as $root.something\n\n        this.viewModel.$root = this.viewModel; // 1st step\n        // parsView walk the DOM and create binding cache that holds each element's binding details\n        // this binding cache is like AST for render and update\n\n        this.parseView(); // for jquery user set viewModel referece to $rootElement for easy debug\n        // otherwise use Expando to attach viewModel to $rootElement\n\n        this.$rootElement[bindingDataReference.rootDataKey] = this.viewModel;\n        return this;\n      }\n      /**\r\n       * parseView\r\n       * @description\r\n       * @return {this}\r\n       * traver from $rootElement to find each data-bind-* element\r\n       * then apply data binding\r\n       */\n\n\n      parseView() {\n        this.elementCache = createBindingCache({\n          rootNode: this.$rootElement,\n          bindingAttrs: this.bindingAttrs\n        }); // updateElementCache if server rendered on init\n\n        if (this.isServerRendered && !this.initRendered) {\n          this.updateElementCache({\n            templateCache: true\n          });\n        }\n\n        return this;\n      }\n      /**\r\n       * updateElementCache\r\n       * @param {object} opt\r\n       * @description call createBindingCache to parse view and generate bindingCache\r\n       */\n\n\n      updateElementCache(opt = {}) {\n        const elementCache = opt.elementCache || this.elementCache;\n\n        if (opt.allCache) {\n          // walk dom from root element to regenerate elementCache\n          this.elementCache = createBindingCache({\n            rootNode: this.$rootElement,\n            bindingAttrs: this.bindingAttrs\n          });\n        } // walk from first rendered template node to create/update child bindingCache\n\n\n        if (opt.allCache || opt.templateCache) {\n          if (elementCache[this.bindingAttrs.tmp] && elementCache[this.bindingAttrs.tmp].length) {\n            elementCache[this.bindingAttrs.tmp].forEach(cache => {\n              // set skipCheck as skipForOfParseFn whenever an node has\n              // both template and forOf bindings\n              // then the template bindingCache should be an empty object\n              let skipForOfParseFn = null;\n\n              if (cache.el.hasAttribute(this.bindingAttrs.forOf)) {\n                skipForOfParseFn = () => {\n                  return true;\n                };\n              }\n\n              cache.bindingCache = createBindingCache({\n                rootNode: cache.el,\n                bindingAttrs: this.bindingAttrs,\n                skipCheck: skipForOfParseFn,\n                isRenderedTemplate: opt.isRenderedTemplates\n              });\n            });\n          }\n        }\n      }\n\n      render(opt = {}) {\n        let updateOption = {};\n\n        if (!this.initRendered) {\n          // only update eventsBinding if server rendered\n          if (this.isServerRendered) {\n            this.$rootElement.removeAttribute(serverRenderedAttr);\n            updateOption = createBindingOption(bindingUpdateConditions.serverRendered, opt);\n          } else {\n            updateOption = createBindingOption(bindingUpdateConditions.init, opt);\n          }\n        } else {\n          // when called again only update visualBinding options\n          updateOption = createBindingOption('', opt);\n        } // create postProcessQueue before start rendering\n\n\n        this.postProcessQueue = [];\n        const renderBindingOption = {\n          ctx: this,\n          elementCache: this.elementCache,\n          updateOption: updateOption,\n          bindingAttrs: this.bindingAttrs,\n          viewModel: this.viewModel\n        }; // always render template binding first\n        // render and apply binding to template(s)\n        // this is an share function therefore passing 'this' context\n\n        renderTemplatesBinding(renderBindingOption); // apply bindings to rest of the DOM\n\n        applyBinding(renderBindingOption); // trigger postProcess\n\n        postProcess(this.postProcessQueue); // clear postProcessQueue\n\n        this.postProcessQueue.length = 0;\n        delete this.postProcessQueue;\n        this.initRendered = true;\n      }\n\n      subscribe(eventName = '', fn) {\n        subscribeEvent(this, eventName, fn);\n        return this;\n      }\n\n      subscribeOnce(eventName = '', fn) {\n        subscribeEventOnce(this, eventName, fn);\n        return this;\n      }\n\n      unsubscribe(eventName = '') {\n        unsubscribeEvent(this.compId, eventName);\n        return this;\n      }\n\n      unsubscribeAll() {\n        unsubscribeAllEvent(this.compId);\n        return this;\n      }\n\n      publish(eventName = '', ...args) {\n        publishEvent(eventName, ...args);\n        return this;\n      }\n\n    }\n\n    const isSupportPromise = typeof window['Promise'] === 'function';\n    let bindingAttrs = bindingAttrs$1;\n\n    const use = (settings = {}) => {\n      if (settings.bindingAttrs) {\n        bindingAttrs = extend({}, settings.bindingAttrs);\n      }\n    };\n\n    const init = ($rootElement, viewModel = null) => {\n      if (!isSupportPromise) {\n        return console.warn('Browser not support Promise');\n      }\n\n      return new Binder($rootElement, viewModel, bindingAttrs);\n    };\n\n    var index = {\n      use: use,\n      init: init,\n      version: '1.12.0'\n    };\n\n    return index;\n\n})));\n","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the months added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n */\n\nexport default function addMonths(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  var dayOfMonth = date.getDate(); // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n\n  var endOfDesiredMonth = new Date(date.getTime());\n  endOfDesiredMonth.setMonth(date.getMonth() + amount + 1, 0);\n  var daysInMonth = endOfDesiredMonth.getDate();\n\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return date;\n  }\n}","import requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","/**\n * Return all mondays of the month\n * @param {*} date\n * @returns\n */\nconst getMondays = date => {\n    const d = date ? new Date(date.getTime()) : new Date()\n    const month = d.getMonth()\n    const mondays = []\n\n    d.setDate(1)\n\n    // Get all the other Mondays in the month\n    while (d.getMonth() === month) {\n        mondays.push(new Date(d.getTime()))\n        d.setDate(d.getDate() + 7)\n    }\n\n    return mondays\n}\n\n/**\n * Return YYYY-MM-DD\n */\nexport const toISOStringShort = date => new Date(date).toISOString().slice(0, 10)\n\nexport { getMondays }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable vars-on-top */\n/* eslint-disable no-var */\n\nimport dataBind from '@gogocat/data-bind'\nimport { addMonths } from 'date-fns'\nimport { toISOStringShort } from '../../helpers/dates'\n\nclass BookingsController {\n    /** @type {import('../types/memberstack').Member} */\n    member\n\n    /** @type {Binder} */\n    component\n\n    /**\n     * @typedef {Object} ViewModel\n     * @property {boolean} isLoading\n     * @property {boolean} isEmpty\n     * @property {Bookings} bookings\n     */\n\n    /**\n     * Initialize controller\n     */\n    async init() {\n        // Wait for MemberStack\n        // eslint-disable-next-line no-undef\n        const member = await MemberStack.onReady\n        this.member = member\n\n        /** @type {ViewModel} */\n        this._viewModel = {\n            isLoading: true,\n            isEmpty: false,\n            bookings: []\n        }\n\n        this.component = dataBind.init(\n            document.querySelector('[data-bind-comp=\"dashboardComp\"]'),\n            this._viewModel\n        )\n\n        // BUG: This is not executed correctly without a wait\n        setTimeout(async () => {\n            await this.component.render()\n            this.load()\n        }, 500)\n    }\n\n    /**\n     * Fetch and load bookings\n     */\n    async load() {\n        // Fetch bookings for the upcoming 3 months\n        const dateFrom = new Date()\n        const dateTo = addMonths(dateFrom, 3)\n        const bookings = await this.fetch(dateFrom, dateTo)\n        this.bookings = bookings\n    }\n\n    /**\n     * @param {ViewModel} model\n     */\n    set viewModel(model) {\n        this._viewModel = model\n        this.component.render()\n    }\n\n    get viewModel() {\n        return this._viewModel\n    }\n\n    /**\n     * Bind bookings to UI Component\n     * @param {Bookings} bookings\n     */\n    set bookings(bookings) {\n        const model = this.viewModel\n        model.bookings = bookings\n        model.isEmpty = bookings.length === 0\n        this.viewModel = model\n    }\n\n    /**\n     * @param {boolean} isLoading\n     */\n    set isLoading(isLoading) {\n        const model = this.viewModel\n        model.isLoading = isLoading\n        this.viewModel = model\n    }\n\n    /**\n     * Fetch bookings for user within date range\n     * @param {Date} dateFrom\n     * @param {Date} dateTo\n     * @returns {Bookings}\n     */\n    async fetch(dateFrom, dateTo) {\n        const fromStr = toISOStringShort(dateFrom)\n        const toStr = toISOStringShort(dateTo)\n        const customer = Number(this.member['pootsy-id'])\n\n        /** @type {Bookings} */\n        let bookings = []\n\n        try {\n            const url = new URL('https://blue.inplace.be/api/bookings')\n            const params = new URLSearchParams({\n                code: 'X0XQCODICDXlLbCRdgVHLlN7C-lNWRZ_DOZmJJkxyAj5AzFu3r05kw==',\n                customer,\n                from_date: fromStr,\n                to_date: toStr\n            })\n\n            url.search = params\n            const res = await fetch(url)\n            const resJson = await res.json()\n            bookings = this.remodel(resJson)\n        } catch (err) {\n            console.error(err)\n        }\n\n        this.isLoading = false\n        return bookings\n    }\n\n    /**\n     * @typedef {Object} BookingType\n     * @property {string} id\n     * @property {number} teamMemberId\n     * @property {number} customerId\n     * @property {string} teamMember\n     * @property {string} serviceDate\n     * @property {string} startTime\n     * @property {string} endTime\n     * @property {string} startEndTime\n     * @property {string} day\n     * @property {string} weekday\n     * @property {string} month\n     * @property {boolean} recurrence\n     * @property {string} status\n     * @property {string} canceled\n     * @property {number} duration\n     *\n     * @typedef {BookingType[]} Bookings\n     */\n    /**\n     * Remodel booking data to fit interface needs\n     * @param {import('../types/bookings').BookingsReadResponse} incoming\n     * @returns {Bookings}\n     */\n    remodel(incoming) {\n        const { lang } = this\n\n        return incoming?.data?.map(orig => {\n            const dateStrToTime = dateStr =>\n                new Date(dateStr).toLocaleTimeString('fr', { timeStyle: 'short' })\n            const startEndTime = attrs =>\n                `${dateStrToTime(attrs.start_time)} - ${dateStrToTime(attrs.end_time)}`\n\n            const attrs = orig.attributes\n            const date = new Date(attrs.start_time)\n\n            /** @type {BookingType} */\n            const booking = {\n                id: orig.id,\n                teamMemberId: attrs.worker_contract_id,\n                customerId: attrs.customer_contract_id,\n                teamMember: attrs.worker_display_name,\n                serviceDate: attrs.delivery_date,\n                startTime: dateStrToTime(attrs.start_time),\n                endTime: dateStrToTime(attrs.end_time),\n                startEndTime: startEndTime(attrs),\n                day: date.getDate(),\n                weekday: date.toLocaleDateString(lang, { weekday: 'short' }),\n                month: date.toLocaleDateString(lang, { month: 'short' }),\n                recurrence: attrs.recurrence,\n                status: attrs.service_delivery_status,\n                canceled: attrs.service_delivery_status === 'cancelled',\n                duration: `${attrs.billable_hours}h`\n            }\n\n            return booking\n        })\n    }\n\n    /**\n     * Get the user language from Weglot\n     */\n    get lang() {\n        // eslint-disable-next-line no-undef\n        return Weglot?.getCurrentLang() || 'FR'\n    }\n}\n\n// eslint-disable-next-line no-use-before-define\nvar Webflow = Webflow || window.Webflow || []\nWebflow.push(() => {\n    const controller = new BookingsController()\n    controller.init()\n})\n"],"names":["global","factory","exports","module","define","amd","globalThis","self","dataBind","bindingAttrs$1","comp","tmp","text","click","dblclick","blur","focus","hover","input","change","submit","model","show","css","attr","forOf","if","switch","case","default","serverRenderedAttr","dataIndexAttr","commentPrefix","commentSuffix","bindingDataReference","rootDataKey","currentData","currentIndex","mouseEnterHandlerName","mouseLeaveHandlerName","bindingUpdateConditions","serverRendered","init","maxDatakeyLength","constants","filters","ONCE","PARENT_REF","hasIsArray","Array","isArray","REGEX","BAD_TAGS","FOR_OF","FUNCTION_PARAM","HTML_TAG","OBJECT_LITERAL","PIPE","WHITE_SPACES","LINE_BREAKS_TABS","IS_SUPPORT_TEMPLATE","document","createElement","WRAP_MAP","div","thead","col","tr","td","caption","colgroup","tbody","tfoot","th","obj","Object","prototype","toString","call","isJsObject","isPlainObject","ctor","constructor","prot","hasOwnProperty","isObjectLiteralString","str","test","isEmptyObject","getOwnPropertyNames","length","getFirstHtmlStringTag","htmlString","match","removeBadTags","replace","createHtmlFragment","template","innerHTML","content","fragment","createDocumentFragment","queryContainer","firstTag","wrap","createRange","createContextualFragment","insertAdjacentHTML","query","querySelector","firstChild","appendChild","_get","get","path","def","everyFunc","step","undefined","fullPath","split","filter","Boolean","every","getViewModelValue","viewModel","prop","_set","value","slice","reduce","a","c","i","Math","abs","setViewModelValue","getViewModelPropValue","bindingCache","dataKey","paramList","parameters","isInvertBoolean","charAt","substring","ret","viewModelContext","resolveViewModelContext","oldViewModelProValue","elementData","viewModelPropValue","resolveParamList","args","concat","el","apply","filtersViewModelPropValue","each","index","filterFn","err","throwErrorMessage","parseStringToJson","JSON","parse","arrayRemoveMatch","toArray","frommArray","indexOf","getFormData","$form","data","HTMLFormElement","formData","FormData","forEach","key","push","getFunctionParameterList","paramlist","v","trim","extractFilterList","cacheData","filterList","isOnceIndex","shift","isOnce","splice","invertObj","sourceObj","keys","createDeferredObj","dfObj","promise","Promise","resolve","reject","debounceRaf","fn","ctx","rafId","from","arguments","window","cancelAnimationFrame","requestAnimationFrame","console","error","extend","isDeepMerge","target","sources","source","assign","isMergebleObject","keysLength","isArrayObj","TypeError","item","cloneDomNode","element","cloneNode","insertAfter","parentNode","newNode","referenceNode","refNextElement","nextSibling","insertBefore","datakey","bindingDataContext","map","param","removeElement","removeChild","emptyElement","node","errorMessage","message","log","parseBindingObjectString","objectLiteralString","keyVal","bindingAttrsMap","walkDOM","func","parseChildNode","firstElementChild","nextElementSibling","getAttributesObject","attributes","name","checkSkipChildParseBindings","attrObj","bindingAttrs","type","rootSkipCheck","tagName","defaultSkipCheck","hasAttribute","populateBindingCache","attrValue","createBindingCache","rootNode","skipCheck","isRenderedTemplate","Node","parseNode","skipNodeCheckFn","isSkipForOfChild","nodeType","hasAttributes","hasSkipChildParseBindings","iterateList","createBindingOption","condition","opt","visualBindingOptions","templateBinding","textBinding","cssBinding","ifBinding","showBinding","modelBinding","attrBinding","forOfBinding","switchBinding","eventsBindingOptions","changeBinding","clickBinding","dblclickBinding","blurBinding","focusBinding","hoverBinding","inputBinding","submitBinding","serverRenderedOptions","updateOption","cache","forceRender","handlerName","inHandlerName","outHandlerName","APP","$root","$rootElement","contains","handlers","onMouseEnterHandler","e","onMouseLeaveHandler","removeEventListener","addEventListener","baseToString","reUnescapedHtml","reHasUnescapedHtml","RegExp","htmlEscapes","escapeHtmlChar","chr","escape","string","modelDataKey","getAttribute","newValue","oldValue","handlerFn","changeHandler","$this","isCheckbox","checked","currentTarget","$element","isRadio","inputName","$radioGroup","querySelectorAll","radioGroupLength","textContent","currentInlineSytle","currentInlineDisplaySytle","shouldShow","oldShowStatus","displayStyle","computedStyle","style","display","computeStyle","getComputedStyle","getPropertyValue","setProperty","removeProperty","removeAttribute","oldCssList","newCssList","vmCssListObj","vmCssListArray","isViewDataObject","isViewDataString","cssList","stringify","domCssList","classList","domCssListLength","k","join","setAttribute","isObjLiteralStr","vmAttrObj","oldAttrObj","$domFragment","$templateRoot","nestTemplatesCount","getTemplateString","id","templateElement","getElementById","renderTemplate","elementCache","settings","viewData","isAppend","append","isPrepend","prepend","$currentElement","$index","htmlFragment","childNodes","$nestedTemplates","nestedTemplatesLength","thisTemplateCache","afterTemplateRender","renderTemplatesBinding","updateElementCache","templateCache","isRenderedTemplates","applyBinding","renderIteration","iterationVm","isRegenerate","bindingUpdateOption","createClonedElementCache","bindingData","clonedElement","setCommentPrefix","commentPrefix$1","dataKeyMarker","setDocRangeEndAfter","startTextContent","endTextContent","docRange","setEndBefore","wrapCommentAround","prefix","commentBegin","createComment","commentEnd","previousNonTemplateElement","previousSibling","nextNonTemplateElement","parentElement","removeElemnetsByCommentWrap","setStartBefore","deleteContents","insertRenderedElements","renderForOfBinding","iterationDataLength","iterationData","iterator","iterationSize","iterationBindingCache","createIterationViewModel","generateForOfElements","alias","clonedItem","forExpMatch","isTargetDomRemoved","commentStartTextContent","endCommentTag","renderIfBinding","isDomRemoved","rootElement","removeIfBinding","hasIterationBindingCache","shouldRender","removeBindingInQueue","postProcessQueue","newExpression","cases","childrenElements","children","elementLength","caseData","createCaseData","isDefault","hasMatch","j","casesLength","newCaseValue","removeUnmatchCases","matchedIndex","attrName","createEventBinding","handlerWrap","postProcess","tasks","task","String","EVENTS","subscribeEvent","instance","eventName","compId","subscriber","isSubscribed","some","bind","subscribeEventOnce","unsubscribeEvent","subscribersLength","unsubscribeAllEvent","publishEvent","compIdIndex","Binder","initRendered","render","isServerRendered","parseView","allCache","skipForOfParseFn","renderBindingOption","subscribe","subscribeOnce","unsubscribe","unsubscribeAll","publish","isSupportPromise","use","warn","version","requiredArgs","required","toInteger","dirtyNumber","NaN","number","Number","isNaN","ceil","floor","toDate","addMonths","dirtyDate","dirtyAmount","date","amount","Date","dayOfMonth","getDate","endOfDesiredMonth","getTime","setMonth","getMonth","daysInMonth","setFullYear","getFullYear","argument","argStr","Error","stack","getMondays","d","month","mondays","setDate","toISOStringShort","toISOString","BookingsController","member","component","MemberStack","onReady","_viewModel","isLoading","isEmpty","bookings","setTimeout","load","dateFrom","dateTo","fetch","fromStr","toStr","customer","url","URL","params","URLSearchParams","code","from_date","to_date","search","res","resJson","json","remodel","incoming","lang","orig","dateStrToTime","dateStr","toLocaleTimeString","timeStyle","startEndTime","attrs","start_time","end_time","booking","teamMemberId","worker_contract_id","customerId","customer_contract_id","teamMember","worker_display_name","serviceDate","delivery_date","startTime","endTime","day","weekday","toLocaleDateString","recurrence","status","service_delivery_status","canceled","duration","billable_hours","Weglot","getCurrentLang","Webflow","controller"],"sourceRoot":""}