{"version":3,"file":"booking/StepDuration.js","mappings":"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","sources":["webpack://ui-booking/./src/booking/controllers/options.js","webpack://ui-booking/./src/booking/controllers/estimation.js","webpack://ui-booking/./node_modules/js-cookie/dist/js.cookie.mjs","webpack://ui-booking/./src/booking/controllers/sequence.js","webpack://ui-booking/./src/booking/helpers/dom.js","webpack://ui-booking/./src/booking/controllers/navigation.js","webpack://ui-booking/./src/booking/packages/duration.js","webpack://ui-booking/./src/booking/controllers/step.js"],"sourcesContent":["/**\n * @typedef {{cleaning:boolean, cooking:boolean, grocery:boolean, ironing:boolean}} Service\n * @typedef {('cleaning'|'cooking'|'grocery'|'ironing')[]} Services\n */\n\n/**\n * Helpers\n */\n\n/**\n * Removes prefix from string\n * @param {string} s input String\n * @param {string} p prefix to be removed\n * @returns {string} string without prefix\n */\nconst rmPrefix = (s, p) => s.replace(new RegExp(`^${p}`), '')\n\n/**\n * Booking Options\n * @class\n * @constructor\n * @public\n */\nexport default class BookingOptions {\n    cookie\n\n    /**\n     * @typedef {Object} SessionOptions\n     * @property {string} cleaning-bathrooms\n     * @property {string} cleaning-bedrooms\n     * @property {boolean} extra-cabinets\n     * @property {boolean} extra-fridge\n     * @property {boolean} extra-oven\n     * @property {boolean} extra-windows\n     * @property {string} ironing\n     * @property {string} postal-code\n     * @property {boolean} service-cleaning\n     * @property {boolean} service-cooking\n     * @property {boolean} service-grocery\n     * @property {boolean} service-ironing\n     * @property {number} duration\n     * @property {string} frequency\n     * @property {string} start-timestamp\n     * @property {string} end-timestamp\n     * @property {string} team-member\n     * @property {string} team-member-name\n     * @property {string} team-member-first-name\n     */\n    /**\n     * @type {SessionOptions}\n     */\n    ops\n\n    constructor() {\n        this.cookie = window.FpCookie\n        this.ops = this.cookie.store\n    }\n\n    /**\n     * Check if options are valid\n     */\n    get isValid() {\n        return Object.keys(this.ops).length > 0\n    }\n\n    /**\n     * @param {string} prefix\n     * @returns {object}\n     */\n    #getOptionWithPrefix(prefix) {\n        return (\n            Object.entries(this.ops)\n                // eslint-disable-next-line no-unused-vars\n                .filter(([key, _]) => key.startsWith(prefix))\n                .reduce((acc, [key, value]) => {\n                    acc[rmPrefix(key, prefix)] = value\n                    return acc\n                }, {})\n        )\n    }\n\n    /**\n     * @param {string} prefix\n     * @param {(any|undefined)} [filter=undefined]\n     * @returns {any[]}\n     */\n    #filterOptionWithPrefix(prefix, filter = undefined) {\n        return (\n            Object.entries(this.ops)\n                .filter(\n                    ([key, value]) =>\n                        key.startsWith(prefix) && (filter === undefined || value === filter)\n                )\n                // eslint-disable-next-line no-unused-vars\n                .map(([key, _]) => rmPrefix(key, prefix))\n        )\n    }\n\n    /**\n     * @returns {{bathrooms:string, bedrooms:string}}\n     */\n    get cleaning() {\n        return this.ops['service-cleaning'] ? this.#getOptionWithPrefix('cleaning-') : {}\n    }\n\n    /**\n     * @returns {('cabinets' | 'fridge' | 'oven' | 'windows')[]}\n     */\n    get extras() {\n        return this.ops['service-cleaning'] ? this.#filterOptionWithPrefix('extra-', true) : []\n    }\n\n    /**\n     * @returns {{cabinets:boolean, fridge:boolean, oven:boolean, windows:boolean}}\n     */\n    get extra() {\n        return this.ops['service-cleaning'] ? this.#getOptionWithPrefix('extra-') : {}\n    }\n\n    /**\n     * @returns {('xs'|'s'|'m'|'l'|'xl'|'')}\n     */\n    get ironing() {\n        return this.ops['service-ironing'] ? this.ops.ironing.replace('ironing-size-', '') : ''\n    }\n\n    /**\n     * @returns {number}\n     */\n    get postalCode() {\n        return this.ops['postal-code']\n    }\n\n    /**\n     * @returns {Services}\n     */\n    get services() {\n        return this.#filterOptionWithPrefix('service-', true)\n    }\n\n    /**\n     * @returns {Service}\n     */\n    get service() {\n        return this.#getOptionWithPrefix('service-')\n    }\n\n    /**\n     * @returns {number}\n     */\n    get duration() {\n        return this.ops?.duration\n    }\n\n    /**\n     * @returns {('weekly'|'biweekly'|'once')}\n     */\n    get recurrence() {\n        return this.ops?.frequency\n    }\n\n    /**\n     * @returns {Date}\n     */\n    get start() {\n        return new Date(this.ops['start-timestamp'])\n    }\n\n    /**\n     * @returns {Date}\n     */\n    get end() {\n        return new Date(this.ops['end-timestamp'])\n    }\n\n    /**\n     * @typedef {Object} TeamMember\n     * @property {string} id\n     * @property {string} name\n     * @property {string} firstName\n     *\n     * @returns {TeamMember}\n     */\n    get teamMember() {\n        return {\n            id: this.ops['team-member'],\n            name: this.ops['team-member-name'],\n            firstName: this.ops['team-member-first-name']\n        }\n    }\n}\n","import BookingOptions from './options'\n\nexport default class Estimation {\n    /**\n     * @type {BookingOptions}\n     */\n    ops\n\n    constructor() {\n        this.ops = new BookingOptions()\n    }\n\n    get total() {\n        return 3 + this.services + this.ironing + this.cleaning\n    }\n\n    get services() {\n        const { services } = this.ops\n        let total = 0\n        if (services.length > 1) {\n            total += this.ops.service.cooking ? 0.5 : 0\n            total += this.ops.service.grocery ? 0.5 : 0\n        }\n        return total\n    }\n\n    get ironing() {\n        if (!this.ops.service.ironing) return 0\n\n        switch (this.ops.ironing) {\n            case 'xs':\n                return 0.5\n            case 's':\n                return 1\n            case 'm':\n                return 2\n            case 'l':\n                return 3\n            case 'xl':\n                return 4\n            default:\n                return 0\n        }\n    }\n\n    get cleaning() {\n        if (!this.ops.service.cleaning) return 0\n\n        // Extras\n        const { extra } = this.ops\n        let total = extra.windows ? 1 : 0\n        total += extra.cabinets ? 1 : 0\n        total += extra.fridge ? 0.5 : 0\n        total += extra.oven ? 0.5 : 0\n\n        // Bedroom\n        const bedroom = this.ops.cleaning.bedrooms\n        const bathroom = this.ops.cleaning.bathrooms\n        switch (bedroom) {\n            case '3':\n            case '4':\n                total += 1\n                break\n            case '5+':\n                total += 2\n                break\n            default:\n                break\n        }\n\n        switch (bathroom) {\n            case '2':\n                total += 1\n                break\n            case '3':\n                total += 2\n                break\n            case '4+':\n                total += 3\n                break\n            default:\n                break\n        }\n        return total\n    }\n}\n","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","import Cookies from 'js-cookie'\n\n/**\n * @typedef {string} StepCode\n */\n\n/**\n * @enum {StepCode}\n */\nconst STEP = {\n    PostalCode: '/booking',\n    Services: '/booking/services',\n    Ironing: '/booking/ironing',\n    Cleaning: '/booking/cleaning',\n    Duration: '/booking/duration',\n    Availability: '/booking/availability',\n    Confirmation: '/booking/confirmation'\n}\n\nconst COOKIE_BOOKING = '__booking'\n\n/**\n * Sequence Controller\n */\nexport default class Sequence {\n    #current\n    list\n\n    /**\n     * @param {StepCode} curr\n     */\n    constructor(curr) {\n        const cookieStr = Cookies.get(COOKIE_BOOKING)\n\n        if (cookieStr) {\n            const cookie = JSON.parse(cookieStr)\n            this.list = cookie.seq\n        } else this.init({})\n\n        this.current = curr\n    }\n\n    init({ ironing = false, cleaning = false } = {}) {\n        let seq = [STEP.PostalCode, STEP.Services]\n        if (ironing) seq.push(STEP.Ironing)\n        if (cleaning) seq.push(STEP.Cleaning)\n        seq = seq.concat([STEP.Duration, STEP.Availability, STEP.Confirmation])\n        this.list = seq\n        this.setCookies()\n    }\n\n    setCookies() {\n        Cookies.set(\n            COOKIE_BOOKING,\n            JSON.stringify({\n                seq: this.list\n            }),\n            { secure: true, sameSite: 'strict' }\n        )\n    }\n\n    next() {\n        return this.list[this.#current + 1]\n    }\n\n    prev() {\n        return this.list[this.#current - 1]\n    }\n\n    get total() {\n        return this.list.length\n    }\n\n    get current() {\n        return this.list[this.#current]\n    }\n\n    /**\n     * @param {string} current\n     */\n    set current(curr) {\n        const currIndex = Object.values(this.list).findIndex(e => e === curr)\n        if (currIndex >= 0) this.#current = currIndex\n    }\n\n    get currentIndex() {\n        return this.#current\n    }\n}\n\nexport { STEP }\n","// eslint-disable-next-line max-classes-per-file\nclass Dom {\n    /**\n     * Get Element by Id\n     *\n     * @param {string} id element id\n     * @returns {Element}\n     */\n    static id(id) {\n        return document.getElementById(id)\n    }\n\n    /**\n     * Query selector\n     *\n     * @param {string} query Dom query string\n     * @returns {Element}\n     */\n    static q(query) {\n        return document.querySelector(query)\n    }\n\n    /**\n     * Query selector all\n     *\n     * @param {string} query Dom query string\n     * @returns {NodeList}\n     */\n    static qall(query) {\n        return document.querySelectorAll(query)\n    }\n\n    /**\n     * Message popup\n     * @param {string} id\n     * @returns {Promise}\n     */\n    static toast(id) {\n        const toastBlock = Dom.id(id)\n        toastBlock.classList.add('active')\n\n        return setTimeout(() => {\n            toastBlock.classList.remove('active')\n        }, 1000 * 4)\n    }\n\n    static set nextButtonDisabled(isDisabled) {\n        const nextButton = document.querySelector('.next-button-flow')\n        if (!nextButton) return\n        nextButton.disabled = isDisabled\n        if (isDisabled) nextButton.classList.add('disabled')\n        else nextButton.classList.remove('disabled')\n    }\n\n    /**\n     * Helpers\n     */\n    static queryOptions(id, checked = false) {\n        return Array.from(\n            document.querySelectorAll(`input[id*='${id}']${checked ? ':checked' : ''}`)\n        )\n    }\n\n    static getRadio(name, checked = false) {\n        return this.q(`input[name*=\"${name}\"]${checked ? ':checked' : ''}`)\n    }\n\n    static queryRadio(name, checked = false) {\n        return Array.from(this.qall(`input[name*='${name}']${checked ? ':checked' : ''}`))\n    }\n\n    static getOption(id, checked = false) {\n        return this.q(`input[id*='${id}']${checked ? ':checked' : ''}`)\n    }\n}\n\nconst dom = Dom\n\nexport default dom\n","import dom from '../helpers/dom'\nimport Sequence, { STEP } from './sequence'\n\nexport default class NavigationController {\n    sequence\n\n    constructor({ formId = 'wf-form-step', sequence = new Sequence() }) {\n        this.sequence = sequence\n\n        // Submit = nextButton\n        if (dom.id(formId)) dom.id(formId).onsubmit = this.onNext.bind(this)\n        dom?.id('back-button')?.addEventListener('click', this.onBack.bind(this))\n\n        // Browser history\n        window.onpopstate = this.onBack.bind(this)\n    }\n\n    // Navigate to first STEP (Services)\n    restart() {\n        window.location.href = STEP.Services\n    }\n\n    /**\n     *\n     * @param {import('./sequence').StepCode} step\n     */\n    goto(step) {\n        window.location.href = step\n    }\n\n    /**\n     * @param {Event} e\n     */\n    onNext(e) {\n        e.preventDefault()\n        // eslint-disable-next-line no-restricted-globals\n        history.pushState({}, null, location.href)\n        window.location.href = this.sequence.next()\n    }\n\n    onBack() {\n        // eslint-disable-next-line no-restricted-globals\n        // history.back()\n        window.location.href = this.sequence.prev()\n    }\n}\n","/* eslint-disable class-methods-use-this */\n\nimport Estimation from '../controllers/estimation'\nimport { STEP } from '../controllers/sequence'\nimport StepController from '../controllers/step'\nimport dom from '../helpers/dom'\n\nclass Step extends StepController {\n    constructor() {\n        super(STEP.Duration)\n    }\n\n    /**\n     * Calculate estimation\n     */\n    init() {\n        super.init()\n        this.estimation = this.estimation\n    }\n\n    get estimation() {\n        const options = new Estimation()\n        const { total } = options\n\n        return total\n    }\n\n    set estimation(total) {\n        dom.id('duration').nextElementSibling.noUiSlider.set(total)\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    get isNextDisabled() {\n        return !dom.getRadio('frequency', true)\n    }\n}\n\n// Dependency on NoUISlider requires this step to be initialised by\n// webflow script\nwindow.Step = Step\n","import dom from '../helpers/dom'\nimport NavigationController from './navigation'\nimport BookingOptions from './options'\nimport Sequence, { STEP } from './sequence'\n\nexport default class StepController {\n    /**\n     * @type {HTMLFormElement}\n     */\n    form\n\n    /**\n     * @type {NavigationController}\n     */\n    nav\n\n    /**\n     * @type {BookingOptions}\n     */\n    ops\n\n    /**\n     * Create new StepController\n     * @param {import('./sequence').StepCode} curr Current step\n     * @param {string} formId Step form Id\n     */\n    constructor(curr, formId = 'wf-form-step') {\n        this.form = dom.id(formId)\n        this.nav = new NavigationController({ formId, sequence: new Sequence(curr) })\n        this.ops = new BookingOptions()\n        this.validateState()\n    }\n\n    /**\n     * Initialize controller\n     */\n    init() {\n        this.setupInputHandlers()\n        dom.nextButtonDisabled = true\n        this.toggleNext()\n        this.updateNav()\n    }\n\n    /**\n     * Create event handlers\n     */\n    setupInputHandlers() {\n        this.form.querySelectorAll('input').forEach(input => {\n            // Do not mess with submit button\n            if (input.type === 'submit') return\n\n            const inputEvent = {\n                radio: 'click',\n                number: 'input'\n            }\n\n            const event = inputEvent[input.type] || 'change'\n\n            input.addEventListener(event, this.toggleNext.bind(this))\n\n            // Sometimes inputs start checked for no reason\n            // eslint-disable-next-line no-param-reassign\n            input.checked = false\n        })\n    }\n\n    /**\n     * Check if a booking session cookie exists with booking options\n     * Otherwise, redirect to /booking/services\n     */\n    validateState() {\n        if (!this.ops.isValid || !this.ops.postalCode) this.nav.goto(STEP.PostalCode)\n        else if (this.ops.services.length === 0) this.nav.goto(STEP.Services)\n    }\n\n    /**\n     * Toggle next button active\n     */\n    toggleNext() {\n        dom.nextButtonDisabled = this.isNextDisabled\n    }\n\n    /**\n     * Control next button\n     */\n    // eslint-disable-next-line class-methods-use-this\n    get isNextDisabled() {\n        return false\n    }\n\n    /**\n     * Update Nav step count\n     */\n    updateNav() {\n        dom.id('step-nav').innerHTML = `Step ${this.nav.sequence.currentIndex}/${\n            this.nav.sequence.total - 1\n        }`\n    }\n}\n"],"names":["rmPrefix","s","p","replace","RegExp","BookingOptions","cookie","ops","constructor","this","window","FpCookie","store","isValid","Object","keys","length","prefix","entries","filter","key","_","startsWith","reduce","acc","value","undefined","map","cleaning","extras","extra","ironing","postalCode","services","service","duration","recurrence","frequency","start","Date","end","teamMember","id","name","firstName","Estimation","total","cooking","grocery","windows","cabinets","fridge","oven","bedroom","bedrooms","bathroom","bathrooms","target","i","arguments","source","api","init","converter","defaultAttributes","set","attributes","document","expires","now","toUTCString","encodeURIComponent","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","write","create","get","cookies","jar","parts","slice","join","foundKey","read","e","remove","withAttributes","withConverter","freeze","path","STEP","COOKIE_BOOKING","Sequence","list","curr","cookieStr","Cookies","JSON","parse","seq","current","push","concat","setCookies","stringify","secure","sameSite","next","prev","currIndex","values","findIndex","currentIndex","Dom","getElementById","query","querySelector","querySelectorAll","toastBlock","classList","add","setTimeout","nextButtonDisabled","isDisabled","nextButton","disabled","checked","Array","from","q","qall","NavigationController","sequence","formId","dom","onsubmit","onNext","bind","addEventListener","onBack","onpopstate","restart","location","href","goto","step","preventDefault","history","pushState","Step","form","nav","validateState","setupInputHandlers","toggleNext","updateNav","forEach","input","type","event","radio","number","isNextDisabled","innerHTML","super","estimation","options","nextElementSibling","noUiSlider"],"sourceRoot":""}