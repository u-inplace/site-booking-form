var Calendar;!function(){"use strict";var e,t={229:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=n(28),i=n.n(a),r=n(263),o=n(102),s=n(974),l=n.n(s);const d=e=>new Date(e).toISOString().slice(0,10),c="loaderBalls";class h{#e;#t;#n;#a;#i;constructor(e,t,n){this.#a={},this.#n=t,this.#i=n,this.#t=!1,this.#e=e,this.calendar=new(i())({id:`#${e}`,theme:"glass",weekdayType:"long-upper",startWeekday:1,monthDisplayType:"long",primaryColor:"#2aae75",fontFamilyHeader:"Poppins, sans-serif",fontFamilyWeekdays:"Poppins, sans-serif",fontFamilyBody:"Poppins, sans-serif",calendarSize:"large",layoutModifiers:["month-left-align"],dropShadow:"",dateChanged:this.onDateChange,monthChanged:this.onMonthChange}),this.addLoadingAnimation()}async init(){if(this.#t=!0,0===this.calendar.getEventsData().length){const e=new Date,t=(0,r.Z)(e,1);await this.getMonthAvailability(t)}const e=l().sortBy(this.calendar.getEventsData(),"start");e?.length>0&&this.calendar.setDate(e[0]?.start)}onMonthChange=async e=>{const t=(0,o.Z)(e);await this.getMonthAvailability(t),this.#t||this.init()};onDateChange=(e,t)=>{this.#i(e,t)};toggleLoading(e){const t=document.getElementById(c);t&&(t.style.visibility=e?"visible":"hidden")}addLoadingAnimation(){const e=document.createElement("div");e.classList.add("loader"),e.id=c,e.style.visibility="visible",e.innerHTML='\n            <span class="loader__element"></span>\n        ',document.getElementsByClassName("calendar__monthyear")[0].appendChild(e)}async getMonthAvailability(e){this.toggleLoading(!0),await Promise.all((e=>{const t=e?new Date(e.getTime()):new Date,n=t.getMonth(),a=[];for(t.setDate(1);t.getMonth()===n;)a.push(new Date(t.getTime())),t.setDate(t.getDate()+7);return a})(e).map((e=>this.getAvailability(e)))),this.toggleLoading()}async getAvailability(e){const t=d(e);if(e<new Date||this.#a[t])return;this.#a[t]=!0;const n=new URL("https://inplace-booking.azurewebsites.net/api/availability"),a=new URLSearchParams({code:"jDlOk9eyca7HVUuVn2fRaIDQmv57z9l8bCHssUSMzpDugndIrzi5Tw==",postalCode:this.#n.postalCode,duration:this.#n.duration,recurrence:this.#n.recurrence,weekSearchDate:d(e)});n.search=a;const i=await fetch(n),r=await i.json(),o=l().compact(r?.data?.map((t=>t.time_slots.map((t=>(t=>{if(new Date(t.start_time).getMonth()===e.getMonth())return{start:new Date(t.start_time),end:new Date(t.end_time),start_time:t.label,employee:{id:t.affiliate_worker.worker_contract_id,first_name:t.affiliate_worker.first_name,last_name:t.affiliate_worker.last_name,allergies:t.affiliate_worker.allergies}}})(t))))).flat());o.length>0&&this.calendar.addEventsData(o)}}}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=function(t,n,i,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],r=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,i,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={213:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],s=n[1],l=n[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)var c=l(a)}for(t&&t(n);d<o.length;d++)r=o[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self.webpackChunkCalendar=self.webpackChunkCalendar||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var i=a.O(void 0,[736],(function(){return a(229)}));i=a.O(i),Calendar=i}();
//# sourceMappingURL=Calendar.bundle.js.map