/*! For license information please see StepAvailability.js.LICENSE.txt */
!function(){var e={930:function(e){e.exports=function(){"use strict";class e{constructor(e={}){var t,r,n,i,a,s,o,c,l,d,h,u,p;if(this.CAL_NAME="color-calendar",this.DAYS_TO_DISPLAY=42,this.weekdayDisplayTypeOptions={short:["S","M","T","W","T","F","S"],"long-lower":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"long-upper":["SUN","MON","TUE","WED","THU","FRI","SAT"]},this.id=null!==(t=e.id)&&void 0!==t?t:"#color-calendar",this.calendarSize=null!==(r=e.calendarSize)&&void 0!==r?r:"large",this.layoutModifiers=null!==(n=e.layoutModifiers)&&void 0!==n?n:[],this.eventsData=null!==(i=e.eventsData)&&void 0!==i?i:[],this.theme=null!==(a=e.theme)&&void 0!==a?a:"basic",this.primaryColor=e.primaryColor,this.headerColor=e.headerColor,this.headerBackgroundColor=e.headerBackgroundColor,this.weekdaysColor=e.weekdaysColor,this.weekdayDisplayType=null!==(s=e.weekdayDisplayType)&&void 0!==s?s:"long-lower",this.monthDisplayType=null!==(o=e.monthDisplayType)&&void 0!==o?o:"long",this.startWeekday=null!==(c=e.startWeekday)&&void 0!==c?c:0,this.fontFamilyHeader=e.fontFamilyHeader,this.fontFamilyWeekdays=e.fontFamilyWeekdays,this.fontFamilyBody=e.fontFamilyBody,this.dropShadow=e.dropShadow,this.border=e.border,this.borderRadius=e.borderRadius,this.disableMonthYearPickers=null!==(l=e.disableMonthYearPickers)&&void 0!==l&&l,this.disableDayClick=null!==(d=e.disableDayClick)&&void 0!==d&&d,this.disableMonthArrowClick=null!==(h=e.disableMonthArrowClick)&&void 0!==h&&h,this.customMonthValues=e.customMonthValues,this.customWeekdayValues=e.customWeekdayValues,this.monthChanged=e.monthChanged,this.dateChanged=e.dateChanged,this.selectedDateClicked=e.selectedDateClicked,this.customWeekdayValues&&7===this.customWeekdayValues.length?this.weekdays=this.customWeekdayValues:this.weekdays=null!==(u=this.weekdayDisplayTypeOptions[this.weekdayDisplayType])&&void 0!==u?u:this.weekdayDisplayTypeOptions.short,this.today=new Date,this.currentDate=new Date,this.pickerType="month",this.eventDayMap={},this.oldSelectedNode=null,this.filteredEventsThisMonth=[],this.daysIn_PrevMonth=[],this.daysIn_CurrentMonth=[],this.daysIn_NextMonth=[],this.firstDay_PrevMonth=0,this.firstDay_CurrentMonth=0,this.firstDay_NextMonth=0,this.numOfDays_PrevMonth=0,this.numOfDays_CurrentMonth=0,this.numOfDays_NextMonth=0,this.yearPickerOffset=0,this.yearPickerOffsetTemporary=0,this.calendar=document.querySelector(this.id),!this.calendar)throw new Error(`[COLOR-CALENDAR] Element with selector '${this.id}' not found`);this.calendar.innerHTML=`\n      <div class="${this.CAL_NAME} ${this.theme} color-calendar--${this.calendarSize}">\n        <div class="calendar__header">\n          <div class="calendar__arrow calendar__arrow-prev"><div class="calendar__arrow-inner"></div></div>\n          <div class="calendar__monthyear">\n            <span class="calendar__month"></span>&nbsp;\n            <span class="calendar__year"></span>\n          </div>\n          <div class="calendar__arrow calendar__arrow-next"><div class="calendar__arrow-inner"></div></div>\n        </div>\n        <div class="calendar__body">\n          <div class="calendar__weekdays"></div>\n          <div class="calendar__days"></div>\n          <div class="calendar__picker">\n            <div class="calendar__picker-month">\n              ${(null!==(p=this.customMonthValues)&&void 0!==p?p:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]).map(((e,t)=>`<div class="calendar__picker-month-option" data-value="${t}">${e}</div>`)).join("")}\n            </div>\n            <div class="calendar__picker-year">\n              <div class="calendar__picker-year-option" data-value="0"></div>\n              <div class="calendar__picker-year-option" data-value="1"></div>\n              <div class="calendar__picker-year-option" data-value="2"></div>\n              <div class="calendar__picker-year-option" data-value="3"></div>\n              <div class="calendar__picker-year-option" data-value="4"></div>\n              <div class="calendar__picker-year-option" data-value="5"></div>\n              <div class="calendar__picker-year-option" data-value="6"></div>\n              <div class="calendar__picker-year-option" data-value="7"></div>\n              <div class="calendar__picker-year-option" data-value="8"></div>\n              <div class="calendar__picker-year-option" data-value="9"></div>\n              <div class="calendar__picker-year-option" data-value="10"></div>\n              <div class="calendar__picker-year-option" data-value="11"></div>\n              <div class="calendar__picker-year-arrow calendar__picker-year-arrow-left">\n                <div class="chevron-thin chevron-thin-left"></div>\n              </div>\n              <div class="calendar__picker-year-arrow calendar__picker-year-arrow-right">\n                <div class="chevron-thin chevron-thin-right"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `,this.calendarRoot=document.querySelector(`${this.id} .${this.CAL_NAME}`),this.calendarHeader=document.querySelector(this.id+" .calendar__header"),this.calendarWeekdays=document.querySelector(this.id+" .calendar__weekdays"),this.calendarDays=document.querySelector(this.id+" .calendar__days"),this.pickerContainer=document.querySelector(this.id+" .calendar__picker"),this.pickerMonthContainer=document.querySelector(this.id+" .calendar__picker-month"),this.pickerYearContainer=document.querySelector(this.id+" .calendar__picker-year"),this.yearPickerChevronLeft=document.querySelector(this.id+" .calendar__picker-year-arrow-left"),this.yearPickerChevronRight=document.querySelector(this.id+" .calendar__picker-year-arrow-right"),this.pickerMonthContainer.children[this.today.getMonth()].classList.add("calendar__picker-month-today"),this.layoutModifiers.forEach((e=>{this.calendarRoot.classList.add(e)})),this.layoutModifiers.includes("month-left-align")&&(this.calendarHeader.innerHTML='\n        <div class="calendar__monthyear">\n          <span class="calendar__month"></span>&nbsp;\n          <span class="calendar__year"></span>\n        </div>\n        <div class="calendar__arrow calendar__arrow-prev"><div class="calendar__arrow-inner"></div></div>\n        <div class="calendar__arrow calendar__arrow-next"><div class="calendar__arrow-inner"></div></div>\n      '),this.monthyearDisplay=document.querySelector(this.id+" .calendar__monthyear"),this.monthDisplay=document.querySelector(this.id+" .calendar__month"),this.yearDisplay=document.querySelector(this.id+" .calendar__year"),this.prevButton=document.querySelector(this.id+" .calendar__arrow-prev .calendar__arrow-inner"),this.nextButton=document.querySelector(this.id+" .calendar__arrow-next .calendar__arrow-inner"),this.togglePicker(!1),this.configureStylePreferences(),this.addEventListeners(),this.reset(new Date)}reset(e){this.currentDate=e||new Date,this.clearCalendarDays(),this.updateMonthYear(),this.updateMonthPickerSelection(this.currentDate.getMonth()),this.generatePickerYears(),this.updateYearPickerSelection(this.currentDate.getFullYear(),4),this.updateYearPickerTodaySelection(),this.generateWeekdays(),this.generateDays(),this.selectDayInitial(!!e),this.renderDays(),this.setOldSelectedNode(),this.dateChanged&&this.dateChanged(this.currentDate,this.getDateEvents(this.currentDate)),this.monthChanged&&this.monthChanged(this.currentDate,this.getMonthEvents())}}return e.prototype.addEventListeners=function(){this.prevButton.addEventListener("click",this.handlePrevMonthButtonClick.bind(this)),this.nextButton.addEventListener("click",this.handleNextMonthButtonClick.bind(this)),this.monthyearDisplay.addEventListener("click",this.handleMonthYearDisplayClick.bind(this)),this.calendarDays.addEventListener("click",this.handleCalendarDayClick.bind(this)),this.pickerMonthContainer.addEventListener("click",this.handleMonthPickerClick.bind(this)),this.pickerYearContainer.addEventListener("click",this.handleYearPickerClick.bind(this)),this.yearPickerChevronLeft.addEventListener("click",this.handleYearChevronLeftClick.bind(this)),this.yearPickerChevronRight.addEventListener("click",this.handleYearChevronRightClick.bind(this))},e.prototype.configureStylePreferences=function(){let e=this.calendarRoot;this.primaryColor&&e.style.setProperty("--cal-color-primary",this.primaryColor),this.fontFamilyHeader&&e.style.setProperty("--cal-font-family-header",this.fontFamilyHeader),this.fontFamilyWeekdays&&e.style.setProperty("--cal-font-family-weekdays",this.fontFamilyWeekdays),this.fontFamilyBody&&e.style.setProperty("--cal-font-family-body",this.fontFamilyBody),this.dropShadow&&e.style.setProperty("--cal-drop-shadow",this.dropShadow),this.border&&e.style.setProperty("--cal-border",this.border),this.borderRadius&&e.style.setProperty("--cal-border-radius",this.borderRadius),this.headerColor&&e.style.setProperty("--cal-header-color",this.headerColor),this.headerBackgroundColor&&e.style.setProperty("--cal-header-background-color",this.headerBackgroundColor),this.weekdaysColor&&e.style.setProperty("--cal-weekdays-color",this.weekdaysColor)},e.prototype.togglePicker=function(e){!0===e?(this.pickerContainer.style.visibility="visible",this.pickerContainer.style.opacity="1","year"===this.pickerType&&this.generatePickerYears(),this.removeYearPickerSelection(),this.updateYearPickerSelection(this.currentDate.getFullYear())):!1===e?(this.pickerContainer.style.visibility="hidden",this.pickerContainer.style.opacity="0",this.monthDisplay&&this.yearDisplay&&(this.monthDisplay.style.opacity="1",this.yearDisplay.style.opacity="1"),this.yearPickerOffsetTemporary=0):"hidden"===this.pickerContainer.style.visibility?(this.pickerContainer.style.visibility="visible",this.pickerContainer.style.opacity="1","year"===this.pickerType&&this.generatePickerYears(),this.removeYearPickerSelection(),this.updateYearPickerSelection(this.currentDate.getFullYear())):(this.pickerContainer.style.visibility="hidden",this.pickerContainer.style.opacity="0",this.monthDisplay&&this.yearDisplay&&(this.monthDisplay.style.opacity="1",this.yearDisplay.style.opacity="1"),this.yearPickerOffsetTemporary=0)},e.prototype.handleMonthPickerClick=function(e){if(!e.target.classList.contains("calendar__picker-month-option"))return;const t=parseInt(e.target.dataset.value,10);this.updateMonthPickerSelection(t),this.updateCurrentDate(0,void 0,t),this.togglePicker(!1)},e.prototype.updateMonthPickerSelection=function(e){e<0?e=11:e%=12,this.removeMonthPickerSelection(),this.pickerMonthContainer.children[e].classList.add("calendar__picker-month-selected")},e.prototype.removeMonthPickerSelection=function(){for(let e=0;e<12;e++)this.pickerMonthContainer.children[e].classList.contains("calendar__picker-month-selected")&&this.pickerMonthContainer.children[e].classList.remove("calendar__picker-month-selected")},e.prototype.handleYearPickerClick=function(e){if(!e.target.classList.contains("calendar__picker-year-option"))return;this.yearPickerOffset+=this.yearPickerOffsetTemporary;const t=parseInt(e.target.innerText),r=parseInt(e.target.dataset.value);this.updateYearPickerSelection(t,r),this.updateCurrentDate(0,void 0,void 0,t),this.togglePicker(!1)},e.prototype.updateYearPickerSelection=function(e,t){if(void 0===t){for(let r=0;r<12;r++){let n=this.pickerYearContainer.children[r];if(parseInt(n.innerHTML)===e&&n.dataset.value){t=parseInt(n.dataset.value);break}}if(void 0===t)return}this.removeYearPickerSelection(),this.pickerYearContainer.children[t].classList.add("calendar__picker-year-selected")},e.prototype.updateYearPickerTodaySelection=function(){parseInt(this.pickerYearContainer.children[4].innerHTML)===this.today.getFullYear()?this.pickerYearContainer.children[4].classList.add("calendar__picker-year-today"):this.pickerYearContainer.children[4].classList.remove("calendar__picker-year-today")},e.prototype.removeYearPickerSelection=function(){for(let e=0;e<12;e++)this.pickerYearContainer.children[e].classList.contains("calendar__picker-year-selected")&&this.pickerYearContainer.children[e].classList.remove("calendar__picker-year-selected")},e.prototype.generatePickerYears=function(){const e=this.today.getFullYear()+this.yearPickerOffset+this.yearPickerOffsetTemporary;let t=0;for(let r=e-4;r<=e+7;r++)this.pickerYearContainer.children[t].innerText=r.toString(),t++;this.updateYearPickerTodaySelection()},e.prototype.handleYearChevronLeftClick=function(){this.yearPickerOffsetTemporary-=12,this.generatePickerYears(),this.removeYearPickerSelection(),this.updateYearPickerSelection(this.currentDate.getFullYear()),this.updateYearPickerTodaySelection()},e.prototype.handleYearChevronRightClick=function(){this.yearPickerOffsetTemporary+=12,this.generatePickerYears(),this.removeYearPickerSelection(),this.updateYearPickerSelection(this.currentDate.getFullYear()),this.updateYearPickerTodaySelection()},e.prototype.setMonthDisplayType=function(e){this.monthDisplayType=e,this.updateMonthYear()},e.prototype.handleMonthYearDisplayClick=function(e){if(!e.target.classList.contains("calendar__month")&&!e.target.classList.contains("calendar__year"))return;if(this.disableMonthYearPickers)return;const t=this.pickerType,r=e.target.classList;r.contains("calendar__month")?(this.pickerType="month",this.monthDisplay.style.opacity="1",this.yearDisplay.style.opacity="0.7",this.pickerMonthContainer.style.display="grid",this.pickerYearContainer.style.display="none"):r.contains("calendar__year")&&(this.pickerType="year",this.monthDisplay.style.opacity="0.7",this.yearDisplay.style.opacity="1",this.pickerMonthContainer.style.display="none",this.pickerYearContainer.style.display="grid"),t===this.pickerType?this.togglePicker():this.togglePicker(!0)},e.prototype.handlePrevMonthButtonClick=function(){if(this.disableMonthArrowClick)return;const e=this.currentDate.getMonth()-1;this.currentDate.getFullYear()<=this.today.getFullYear()+this.yearPickerOffset-4&&e<0&&(this.yearPickerOffset-=12,this.generatePickerYears()),e<0&&this.updateYearPickerSelection(this.currentDate.getFullYear()-1),this.updateMonthPickerSelection(e),this.updateCurrentDate(-1),this.togglePicker(!1)},e.prototype.handleNextMonthButtonClick=function(){if(this.disableMonthArrowClick)return;const e=this.currentDate.getMonth()+1;this.currentDate.getFullYear()>=this.today.getFullYear()+this.yearPickerOffset+7&&e>11&&(this.yearPickerOffset+=12,this.generatePickerYears()),e>11&&this.updateYearPickerSelection(this.currentDate.getFullYear()+1),this.updateMonthPickerSelection(e),this.updateCurrentDate(1),this.togglePicker(!1)},e.prototype.updateMonthYear=function(){this.oldSelectedNode=null,this.customMonthValues?this.monthDisplay.innerHTML=this.customMonthValues[this.currentDate.getMonth()]:this.monthDisplay.innerHTML=new Intl.DateTimeFormat("default",{month:this.monthDisplayType}).format(this.currentDate),this.yearDisplay.innerHTML=this.currentDate.getFullYear().toString()},e.prototype.setWeekdayDisplayType=function(e){var t;this.weekdayDisplayType=e,this.weekdays=null!==(t=this.weekdayDisplayTypeOptions[this.weekdayDisplayType])&&void 0!==t?t:this.weekdayDisplayTypeOptions.short,this.generateWeekdays()},e.prototype.generateWeekdays=function(){let e="";for(let t=0;t<7;t++)e+=`\n      <div class="calendar__weekday">${this.weekdays[(t+this.startWeekday)%7]}</div>\n    `;this.calendarWeekdays.innerHTML=e},e.prototype.setDate=function(e){e&&(e instanceof Date?this.reset(e):this.reset(new Date(e)))},e.prototype.getSelectedDate=function(){return this.currentDate},e.prototype.clearCalendarDays=function(){this.daysIn_PrevMonth=[],this.daysIn_CurrentMonth=[],this.daysIn_NextMonth=[]},e.prototype.updateCalendar=function(e){e&&(this.updateMonthYear(),this.clearCalendarDays(),this.generateDays(),this.selectDayInitial()),this.renderDays(),e&&this.setOldSelectedNode()},e.prototype.setOldSelectedNode=function(){if(!this.oldSelectedNode){let e;for(let t=1;t<this.calendarDays.childNodes.length;t+=2){let r=this.calendarDays.childNodes[t];if(r.classList&&r.classList.contains("calendar__day-active")&&r.innerText===this.currentDate.getDate().toString()){e=r;break}}e&&(this.oldSelectedNode=[e,parseInt(e.innerText)])}},e.prototype.selectDayInitial=function(e){if(e)this.daysIn_CurrentMonth[this.currentDate.getDate()-1].selected=!0;else{let e=this.today.getMonth()===this.currentDate.getMonth(),t=this.today.getDate()===this.currentDate.getDate();e&&t?this.daysIn_CurrentMonth[this.today.getDate()-1].selected=!0:this.daysIn_CurrentMonth[0].selected=!0}},e.prototype.handleCalendarDayClick=function(e){if(!(e.target.classList.contains("calendar__day-box")||e.target.classList.contains("calendar__day-text")||e.target.classList.contains("calendar__day-box-today")||e.target.classList.contains("calendar__day-bullet")))return;if(this.disableDayClick)return;if(this.oldSelectedNode&&!this.oldSelectedNode[0])return;if(e.target.parentElement.classList.contains("calendar__day-selected"))return void(this.selectedDateClicked&&this.selectedDateClicked(this.currentDate,this.getDateEvents(this.currentDate)));let t,r;t=e.target.parentElement.innerText,r=parseInt(t,10),this.removeOldDaySelection(),t&&(this.updateCurrentDate(0,r),Object.assign(this.daysIn_CurrentMonth[r-1],{selected:!0}),this.rerenderSelectedDay(e.target.parentElement,r,!0))},e.prototype.removeOldDaySelection=function(){this.oldSelectedNode&&(Object.assign(this.daysIn_CurrentMonth[this.oldSelectedNode[1]-1],{selected:!1}),this.rerenderSelectedDay(this.oldSelectedNode[0],this.oldSelectedNode[1]))},e.prototype.updateCurrentDate=function(e,t,r,n){this.currentDate=new Date(n||this.currentDate.getFullYear(),null!=r?r:this.currentDate.getMonth()+e,0===e&&t?t:1),(0!==e||null!=r||n)&&(this.updateCalendar(!0),this.monthChanged&&this.monthChanged(this.currentDate,this.getMonthEvents())),this.dateChanged&&this.dateChanged(this.currentDate,this.getDateEvents(this.currentDate))},e.prototype.generateDays=function(){this.numOfDays_PrevMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),0).getDate(),this.firstDay_CurrentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1).getDay(),this.numOfDays_CurrentMonth=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,0).getDate();for(let e=0;e<this.numOfDays_CurrentMonth;e++)this.daysIn_CurrentMonth.push({day:e+1,selected:!1})},e.prototype.renderDays=function(){let e=0;const t=this.currentDate.getFullYear(),r=this.currentDate.getMonth();let n;this.filteredEventsThisMonth=this.eventsData.filter((e=>{const n=new Date(e.start);return n.getFullYear()===t&&n.getMonth()===r})),this.eventDayMap={},this.filteredEventsThisMonth.forEach((e=>{const t=new Date(e.start).getDate(),r=new Date(e.end).getDate();for(let e=t;e<=r;e++)this.eventDayMap[e]=!0})),n=this.firstDay_CurrentMonth<this.startWeekday?7+this.firstDay_CurrentMonth-this.startWeekday:this.firstDay_CurrentMonth-this.startWeekday;let i="";for(let t=0;t<n;t++)i+=`\n      <div class="calendar__day calendar__day-other">${this.numOfDays_PrevMonth+1-n+t}</div>\n    `,e++;let a=this.today.getFullYear()===this.currentDate.getFullYear(),s=this.today.getMonth()===this.currentDate.getMonth()&&a;this.daysIn_CurrentMonth.forEach((t=>{let r=s&&t.day===this.today.getDate();i+=`\n      <div class="calendar__day calendar__day-active${r?" calendar__day-today":""}${this.eventDayMap[t.day]?" calendar__day-event":" calendar__day-no-event"}${t.selected?" calendar__day-selected":""}">\n        <span class="calendar__day-text">${t.day}</span>\n        <div class="calendar__day-bullet"></div>\n        <div class="calendar__day-box"></div>\n      </div>\n    `,e++}));for(let t=0;t<this.DAYS_TO_DISPLAY-e;t++)i+=`\n      <div class="calendar__day calendar__day-other">${t+1}</div>\n    `;this.calendarDays.innerHTML=i},e.prototype.rerenderSelectedDay=function(e,t,r){let n=e.previousElementSibling,i=this.today.getFullYear()===this.currentDate.getFullYear(),a=this.today.getMonth()===this.currentDate.getMonth()&&i&&t===this.today.getDate(),s=document.createElement("div");s.className+=`calendar__day calendar__day-active${a?" calendar__day-today":""}${this.eventDayMap[t]?" calendar__day-event":" calendar__day-no-event"}${this.daysIn_CurrentMonth[t-1].selected?" calendar__day-selected":""}`,s.innerHTML=`\n    <span class="calendar__day-text">${t}</span>\n    <div class="calendar__day-bullet"></div>\n    <div class="calendar__day-box"></div>\n  `,n?n.parentElement?n.parentElement.insertBefore(s,n.nextSibling):console.log("Previous element does not have parent"):this.calendarDays.insertBefore(s,e),r&&(this.oldSelectedNode=[s,t]),e.remove()},e.prototype.getEventsData=function(){return JSON.parse(JSON.stringify(this.eventsData))},e.prototype.setEventsData=function(e){return this.eventsData=JSON.parse(JSON.stringify(e)),this.setDate(this.currentDate),this.eventsData.length},e.prototype.addEventsData=function(e=[]){const t=this.eventsData.push(...e);return this.setDate(this.currentDate),t},e.prototype.getDateEvents=function(e){return this.filteredEventsThisMonth.filter((t=>{const r=new Date(t.start).getDate(),n=new Date(t.end).getDate();return e.getDate()>=r&&e.getDate()<=n}))},e.prototype.getMonthEvents=function(){return this.filteredEventsThisMonth},e}()},51:function(e,t,r){var n=r(304);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return n(e)?e:[e]}},998:function(e){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},178:function(e,t,r){var n=r(284);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},710:function(e){e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},994:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},725:function(e){e.exports=function(e){return e&&e.length?e[0]:void 0}},457:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},807:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},284:function(e){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},391:function(e){e.exports=function(e){return e}},571:function(e,t,r){var n=r(33)(Object.keys,Object);e.exports=n},558:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},506:function(e,t,r){var n=r(994),i=r(457),a=r(391),s=r(558),o=r(661),c=r(618),l=r(260),d=r(967),h=r(304);e.exports=function(e,t,r){t=t.length?n(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[d];var u=-1;t=n(t,c(a));var p=s(e,(function(e,r,i){return{criteria:n(t,(function(t){return t(e)})),index:++u,value:e}}));return o(p,(function(e,t){return l(e,t,r)}))}},307:function(e,t,r){var n=r(967),i=r(212),a=r(125);e.exports=function(e,t){return a(i(e,t,n),e+"")}},661:function(e){e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},618:function(e){e.exports=function(e){return function(t){return e(t)}}},844:function(e,t,r){var n=r(51),i=r(178),a=r(710),s=r(210),o=r(426),c=r(487);e.exports=function(e,t,r){var l=-1,d=i,h=e.length,u=!0,p=[],y=p;if(r)u=!1,d=a;else if(h>=200){var f=t?null:o(e);if(f)return c(f);u=!1,d=s,y=new n}else y=t?[]:p;e:for(;++l<h;){var m=e[l],v=t?t(m):m;if(m=r||0!==m?m:0,u&&v==v){for(var g=y.length;g--;)if(y[g]===v)continue e;t&&y.push(v),p.push(m)}else d(y,v,r)||(y!==p&&y.push(v),p.push(m))}return p}},210:function(e,t,r){var n=r(284);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},474:function(e,t,r){var n=r(570);e.exports=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,a=e==e,s=n(e),o=void 0!==t,c=null===t,l=t==t,d=n(t);if(!c&&!d&&!s&&e>t||s&&o&&l&&!c&&!d||i&&o&&l||!r&&l||!a)return 1;if(!i&&!s&&!d&&e<t||d&&r&&a&&!i&&!s||c&&r&&a||!o&&a||!l)return-1}return 0}},260:function(e,t,r){var n=r(474);e.exports=function(e,t,r){for(var i=-1,a=e.criteria,s=t.criteria,o=a.length,c=r.length;++i<o;){var l=n(a[i],s[i]);if(l)return i>=c?l:l*("desc"==r[i]?-1:1)}return e.index-t.index}},426:function(e){e.exports=function(){}},657:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},965:function(e){e.exports=function(){return!1}},563:function(e){e.exports=function(){return!1}},33:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},212:function(e,t,r){var n=r(998),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,s=-1,o=i(a.length-t,0),c=Array(o);++s<o;)c[s]=a[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=a[s];return l[t]=r(c),n(e,this,l)}}},487:function(e){e.exports=function(){return[]}},125:function(e){e.exports=function(e){return e}},418:function(e){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}},967:function(e){e.exports=function(e){return e}},255:function(e){e.exports=function(){return!1}},304:function(e){var t=Array.isArray;e.exports=t},347:function(e,t,r){var n=r(220),i=r(543);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},448:function(e){e.exports=function(){return!1}},263:function(e,t,r){var n=r(571),i=r(657),a=r(255),s=r(304),o=r(347),c=r(448),l=r(563),d=r(592),h=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||d(e)||a(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(h.call(e,r))return!1;return!0}},220:function(e,t,r){var n=r(807),i=r(716);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},543:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},716:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},570:function(e){e.exports=function(){return!1}},592:function(e){e.exports=function(){return!1}},74:function(e,t,r){var n=r(725),i=r(506),a=r(307),s=r(965),o=a((function(e,t){if(null==e)return[];var r=t.length;return r>1&&s(e,t[0],t[1])?t=[]:r>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])}));e.exports=o},172:function(e,t,r){var n=r(391),i=r(844);e.exports=function(e,t){return e&&e.length?i(e,n(t,2)):[]}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=r(172),t=r.n(e),n=r(263),i=r.n(n),a=r(418),s=r.n(a),o=r(74),c=r.n(o),l=r(930),d=r.n(l);function h(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function u(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function p(e){u(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function y(e,t){u(1,arguments);var r=t||{},n=r.locale,i=n&&n.options&&n.options.weekStartsOn,a=null==i?0:h(i),s=null==r.weekStartsOn?a:h(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=p(e),c=o.getDay(),l=(c<s?7:0)+c-s;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function f(e,t){var r,n;u(1,arguments);var i=p(e),a=i.getFullYear(),s=null==t||null===(r=t.locale)||void 0===r||null===(n=r.options)||void 0===n?void 0:n.firstWeekContainsDate,o=null==s?1:h(s),c=null==(null==t?void 0:t.firstWeekContainsDate)?o:h(t.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setFullYear(a+1,0,c),l.setHours(0,0,0,0);var d=y(l,t),f=new Date(0);f.setFullYear(a,0,c),f.setHours(0,0,0,0);var m=y(f,t);return i.getTime()>=d.getTime()?a+1:i.getTime()>=m.getTime()?a:a-1}function m(e,t){u(1,arguments);var r=t||{},n=r.locale,i=n&&n.options&&n.options.firstWeekContainsDate,a=null==i?1:h(i),s=null==r.firstWeekContainsDate?a:h(r.firstWeekContainsDate),o=f(e,t),c=new Date(0);c.setFullYear(o,0,s),c.setHours(0,0,0,0);var l=y(c,t);return l}var v=6048e5;const g="loaderBalls";class k{#e;#t;#r;#n;#i;#a;constructor(e,t,r){this.#i={},this.#r=t,this.#n=r,this.#t=!1,this.#e=e,this.calendar=new(d())({id:`#${e}`,theme:"glass",weekdayType:"long-upper",startWeekday:1,monthDisplayType:"long",primaryColor:"#2aae75",fontFamilyHeader:"Poppins, sans-serif",fontFamilyWeekdays:"Poppins, sans-serif",fontFamilyBody:"Poppins, sans-serif",calendarSize:"large",layoutModifiers:["month-left-align"],dropShadow:"",dateChanged:this.onDateChange,monthChanged:this.onMonthChange}),this.addLoadingAnimation()}async init(){if(this.#t=!0,0===this.calendar.getEventsData().length){const e=function(e,t){u(2,arguments);var r=p(e),n=h(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var i=r.getDate(),a=new Date(r.getTime());a.setMonth(r.getMonth()+n+1,0);var s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}(new Date,1);await this.getMonthAvailability(e)}const e=c()(this.calendar.getEventsData(),[e=>e.start]);e?.length>0&&this.calendar.setDate(e[0]?.start)}onMonthChange=async e=>{if(this.#a?.getMonth()!==e.getMonth()){this.#a=e;const t=function(e){u(1,arguments);var t=p(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e);await this.getMonthAvailability(t),this.#t||this.init()}};onDateChange=(e,t)=>{this.#a&&this.#a!==e&&(this.#a=e,this.#n(e,t))};toggleLoading(e){const t=document.getElementById(g);t&&(t.style.visibility=e?"visible":"hidden")}addLoadingAnimation(){const e=document.createElement("div");e.classList.add("loader"),e.id=g,e.style.visibility="visible",e.innerHTML='\n            <span class="loader__element"></span>\n        ',document.getElementsByClassName("calendar__monthyear")[0].appendChild(e)}async getMonthAvailability(e){this.toggleLoading(!0),await Promise.all((e=>{const t=e?new Date(e.getTime()):new Date,r=t.getMonth(),n=[];for(t.setDate(1);t.getMonth()===r;)n.push(new Date(t.getTime())),t.setDate(t.getDate()+7);return n})(e).map((e=>this.getAvailability(e)))),this.toggleLoading()}async getAvailability(e){const t=function(e,t){u(1,arguments);var r=p(e),n=y(r,t).getTime()-m(r,t).getTime();return Math.round(n/v)+1}(e);if(e<new Date||this.#i[t])return;this.#i[t]=!0;const r=new URL("https://inplace-booking.azurewebsites.net/api/availability"),n=new URLSearchParams({code:"jDlOk9eyca7HVUuVn2fRaIDQmv57z9l8bCHssUSMzpDugndIrzi5Tw==",postalCode:this.#r.postalCode,duration:this.#r.duration,recurrence:this.#r.recurrence,weekSearchDate:(i=e,new Date(i).toISOString().slice(0,10))});var i;r.search=n;const a=await fetch(r),o=await a.json(),c=s()(o?.data?.map((t=>t.time_slots.map((t=>(t=>{if(new Date(t.start_time).getMonth()===e.getMonth())return{start:new Date(t.start_time),end:new Date(t.end_time),start_time:t.label,employee:{id:t.affiliate_worker.worker_contract_id,first_name:t.affiliate_worker.first_name,last_name:t.affiliate_worker.last_name,allergies:t.affiliate_worker.allergies}}})(t))))).flat());c.length>0&&this.calendar.addEventsData(c)}}const _=(e,t)=>e.replace(new RegExp(`^${t}`),"");class D{cookie;ops;constructor(){this.cookie=window.FpCookie,this.ops=this.cookie.store}get isValid(){return Object.keys(this.ops).length>0}#s(e){return Object.entries(this.ops).filter((([t,r])=>t.startsWith(e))).reduce(((t,[r,n])=>(t[_(r,e)]=n,t)),{})}#o(e,t){return Object.entries(this.ops).filter((([r,n])=>r.startsWith(e)&&(void 0===t||n===t))).map((([t,r])=>_(t,e)))}get cleaning(){return this.ops["service-cleaning"]?this.#s("cleaning-"):{}}get extras(){return this.ops["service-cleaning"]?this.#o("extra-",!0):[]}get extra(){return this.ops["service-cleaning"]?this.#s("extra-"):{}}get ironing(){return this.ops["service-ironing"]?this.ops.ironing.replace("ironing-size-",""):""}get postalCode(){return this.ops["postal-code"]}get services(){return this.#o("service-",!0)}get service(){return this.#s("service-")}get duration(){return this.ops?.duration}get recurrence(){return this.ops?.frequency}get start(){return new Date(this.ops["start-timestamp"])}get end(){return new Date(this.ops["end-timestamp"])}get teamMember(){return{id:this.ops["team-member"],name:this.ops["team-member-name"],firstName:this.ops["team-member-first-name"]}}}function b(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var w=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=b({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var a=r[i].split("="),s=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(n[o]=t.read(s,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",b({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,b({},this.attributes,t))},withConverter:function(t){return e(b({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),C=w;const M="/booking",S="/booking/services",x="/booking/availability",P="__booking";class T{#c;list;constructor(e){const t=C.get(P);if(t){const e=JSON.parse(t);this.list=e.seq}else this.init({});this.current=e}init({ironing:e=!1,cleaning:t=!1}={}){let r=[M,S];e&&r.push("/booking/ironing"),t&&r.push("/booking/cleaning"),r=r.concat(["/booking/duration",x,"/booking/confirmation"]),this.list=r,this.setCookies()}setCookies(){C.set(P,JSON.stringify({seq:this.list}),{secure:!0,sameSite:"strict"})}next(){return this.list[this.#c+1]}prev(){return this.list[this.#c-1]}get total(){return this.list.length}get current(){return this.list[this.#c]}set current(e){const t=Object.values(this.list).findIndex((t=>t===e));t>=0&&(this.#c=t)}get currentIndex(){return this.#c}}class Y{static id(e){return document.getElementById(e)}static q(e){return document.querySelector(e)}static qall(e){return document.querySelectorAll(e)}static toast(e){const t=Y.id(e);return t.classList.add("active"),setTimeout((()=>{t.classList.remove("active")}),4e3)}static set nextButtonDisabled(e){const t=document.querySelector(".next-button-flow");t&&(t.disabled=e,e?t.classList.add("disabled"):t.classList.remove("disabled"))}static queryOptions(e,t=!1){return Array.from(document.querySelectorAll(`input[id*='${e}']${t?":checked":""}`))}static getRadio(e,t=!1){return this.q(`input[name*="${e}"]${t?":checked":""}`)}static queryRadio(e,t=!1){return Array.from(this.qall(`input[name*='${e}']${t?":checked":""}`))}static getOption(e,t=!1){return this.q(`input[id*='${e}']${t?":checked":""}`)}}var L=Y;class O{sequence;constructor({formId:e="wf-form-step",sequence:t=new T}){this.sequence=t,L.id(e)&&(L.id(e).onsubmit=this.onNext.bind(this)),L.id("back-button")?.addEventListener("click",this.onBack.bind(this)),window.onpopstate=this.onBack.bind(this)}restart(){window.location.href=S}goto(e){window.location.href=e}onNext(e){e.preventDefault(),history.pushState({},null,location.href),window.location.href=this.sequence.next()}onBack(){window.location.href=this.sequence.prev()}}class E{_members;#l;constructor(){this.#l=this.#d()}async#d(){const e=new URL("https://inplace-booking.azurewebsites.net/api/collection"),t=new URLSearchParams({code:"Itrex4w/daAwDFd78PsawdASdJyo9clkm1OOhG0Z3GLEe6m484/49A==",name:"team"});e.search=t;const r=await fetch(e),n=await r.json();this._members=n}get members(){return(async()=>(await this.#l,this._members))()}async getMember(e){return(await this.members).find((t=>t.name===e))}makeMemberId(e){return`${e.first_name} ${e.last_name}`}async setMemberDetails(e,t,r){const n=await this.getMember(t);if(n){const t=n?.["profile-picture"];t?.url&&(e.querySelector(".team-avatar").src=t.url),n.french&&e.querySelector(".french").classList.remove("hidden"),n.dutch&&e.querySelector(".dutch").classList.remove("hidden"),n.english&&e.querySelector(".english").classList.remove("hidden")}const i=e.querySelector(".team-member-name");i&&(i.innerText=r.first_name);const a=e.querySelector("input");a&&(a.setAttribute("member-name",`${r.first_name} ${r.last_name}`),a.setAttribute("member-first-name",`${r.first_name}`))}}var N=class{static set service(e){Object.entries(e).forEach((([e,t])=>this.displayService(e,t)))}static displayService(e,t=!0){const{classList:r}=L.id(`summary-${e}`);t?r?.add("service-active"):r?.remove("service-active")}static set recurrence(e){L.id(`summary-${e}`)?.classList.remove("hidden")}};class I extends class{form;nav;ops;constructor(e,t="wf-form-step"){this.form=L.id(t),this.nav=new O({formId:t,sequence:new T(e)}),this.ops=new D,this.validateState()}init(){this.setupInputHandlers(),L.nextButtonDisabled=!0,this.toggleNext(),this.updateNav()}setupInputHandlers(){this.form.querySelectorAll("input").forEach((e=>{if("submit"===e.type)return;const t={radio:"click",number:"input"}[e.type]||"change";e.addEventListener(t,this.toggleNext.bind(this)),e.checked=!1}))}validateState(){this.ops.isValid&&this.ops.postalCode?0===this.ops.services.length&&this.nav.goto(S):this.nav.goto(M)}toggleNext(){L.nextButtonDisabled=this.isNextDisabled}get isNextDisabled(){return!1}updateNav(){L.id("step-nav").innerHTML=`Step ${this.nav.sequence.currentIndex}/${this.nav.sequence.total-1}`}}{#h;openings;ops;cal;team;constructor(){super(x),this.ops=new D,this.cal=class{static openings=class{static cleanUp(){L.id("start-time-block")?.querySelectorAll(".start-time")?.forEach((e=>e.parentNode.removeChild(e)))}static showWarning(){L.id("aval-warning")?.classList.add("msg-active")}static hideWarning(){L.id("aval-warning")?.classList.remove("msg-active")}};static team=class{static showBlock(){L.id("team-members-block")?.classList.add("visible")}static hideBlock(){L.id("team-members-block")?.classList.remove("visible")}static cleanUp(){L.id("team-members-block")?.querySelectorAll(".team-member")?.forEach((e=>e.parentNode.removeChild(e)))}static get memberTemplate(){return L.id("team-member-template")}};static teamMember=class{static get name(){return L.id("team-member-name").value}static set name(e){L.id("team-member-name").value=e}static get firstName(){return L.id("team-member-first-name").value}static set firstName(e){L.id("team-member-first-name").value=e}static get avatar(){return L.id("team-members-block")?.querySelector("img").src}}},this.team=new E}get isNextDisabled(){return!L.getRadio("team-member",!0)}init(){super.init(),this.cal.team.cleanUp(),this.toggleNext(),this.#h=new k("availability-cal",{postalCode:this.ops.postalCode,duration:this.ops.duration,recurrence:this.ops.recurrence},this.onDayChange.bind(this)),this.#u()}#u(){const{service:e,recurrence:t}=this.ops;N.service=e,N.recurrence=t}onDayChange(e,r){const n=document.getElementById("start-time-template");this.openings=r,this.cal.openings.cleanUp(),this.cal.team.hideBlock(),i()(r)?this.cal.openings.showWarning():this.cal.openings.hideWarning(),t()(r,(e=>e.start_time)).forEach((e=>{this.copyTemplate(n,{className:"start-time",parentId:"start-time-block",labelClass:"start-time-text",labelText:e.start_time,radioGroup:"start-time",radioEvent:"click",radioEventHandler:this.onStartTimeSelect.bind(this),radioValue:e.start_time})}))}onStartTimeSelect(e){this.cal.team.cleanUp(),this.cal.team.showBlock();const t=e.target.value,r=this.cal.team.memberTemplate;L.id("start-timestamp").value=this.openings[0].start.toISOString(),L.id("end-timestamp").value=this.openings[0].end.toISOString(),this.openings.filter((e=>e.start_time===t)).forEach((e=>{const t=this.copyTemplate(r,{className:"team-member",parentId:"team-members-block",labelClass:"team-member-name",labelText:e.employee.first_name,radioGroup:"team-member",radioValue:e.employee.id,radioEvent:"click",radioEventHandler:this.onTeamMemberSelect.bind(this)}),n={first_name:e.employee.first_name,last_name:e.employee.last_name},i=this.team.makeMemberId(n);this.team.setMemberDetails(t,i,n)})),L.queryRadio("team-member").forEach((e=>e.addEventListener("click",this.toggleNext.bind(this)))),this.toggleNext()}onTeamMemberSelect(e){const t=e.target;this.cal.teamMember.name=t.getAttribute("member-name"),this.cal.teamMember.firstName=t.getAttribute("member-first-name")}copyTemplate(e,t){const r=e.cloneNode(!0);r.setAttribute("id",""),r.style.display="flex",r.classList.add(t.className);const n=r.querySelector(`input[name*='${t.radioGroup}']`);return n.setAttribute("id",""),n.value=t.radioValue,t.radioEvent&&n.addEventListener(t.radioEvent,t.radioEventHandler),r.querySelector(`.${t.labelClass}`).innerText=t.labelText,document.getElementById(t.parentId).appendChild(r),r}}var q=q||window.Webflow||[];q.push((()=>{(new I).init()}))}()}();
//# sourceMappingURL=StepAvailability.js.map