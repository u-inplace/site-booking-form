{"version":3,"file":"account/bookings.js","mappings":"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","sources":["webpack://ui-booking/./src/helpers/dates.js","webpack://ui-booking/webpack/bootstrap","webpack://ui-booking/webpack/runtime/define property getters","webpack://ui-booking/webpack/runtime/hasOwnProperty shorthand","webpack://ui-booking/webpack/runtime/make namespace object","webpack://ui-booking/./src/account/packages/bookings.js"],"sourcesContent":["/**\n * Return all mondays of the month\n * @param {*} date\n * @returns\n */\nconst getMondays = date => {\n    const d = date ? new Date(date.getTime()) : new Date()\n    const month = d.getMonth()\n    const mondays = []\n\n    d.setDate(1)\n\n    // Get all the other Mondays in the month\n    while (d.getMonth() === month) {\n        mondays.push(new Date(d.getTime()))\n        d.setDate(d.getDate() + 7)\n    }\n\n    return mondays\n}\n\n/**\n * Return YYYY-MM-DD\n */\nexport const toISOStringShort = date => new Date(date).toISOString().slice(0, 10)\n\nexport { getMondays }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable vars-on-top */\nimport { toISOStringShort } from '../../helpers/dates'\n/* eslint-disable no-var */\n\nclass BookingsController {\n    /** @type {import('../types/memberstack').Member} */\n    member\n\n    /**\n     * Initialize controller\n     */\n    async init() {\n        // Wait for MemberStack\n        // eslint-disable-next-line no-undef\n        const member = await MemberStack.onReady\n        this.member = member\n\n        this.load()\n    }\n\n    /**\n     * Fetch and load bookings\n     */\n    async load() {\n        // Fetch bookings for the upcoming 3 months\n        const dateFrom = new Date()\n        const dateTo = new Date(dateFrom.setMonth(dateFrom.getMonth() + 3))\n        const bookings = this.fetch(dateFrom, dateTo)\n        console.log(JSON.stringify(bookings))\n    }\n\n    /**\n     * Fetch bookings for user within date range\n     * @param {Date} dateFrom\n     * @param {Date} dateTo\n     * @returns {import('../types/bookings').BookingsReadResponse}\n     */\n    async fetch(dateFrom, dateTo) {\n        const fromStr = toISOStringShort(dateFrom)\n        const toStr = toISOStringShort(dateTo)\n        const customer = this.member['pootsy-id']\n        let bookings = {}\n\n        try {\n            const url = new URL('https://blue.inplace.be/api/bookings')\n            const params = new URLSearchParams({\n                code: 'X0XQCODICDXlLbCRdgVHLlN7C-lNWRZ_DOZmJJkxyAj5AzFu3r05kw==',\n                customer: Number(customer),\n                fromDate: fromStr,\n                toDate: toStr\n            })\n\n            url.search = params\n            bookings = await fetch(url)\n        } catch (err) {\n            console.error(err)\n        }\n\n        return bookings\n    }\n}\n\n// eslint-disable-next-line no-use-before-define\nvar Webflow = Webflow || window.Webflow || []\nWebflow.push(() => {\n    const controller = new BookingsController()\n    controller.init()\n})\n"],"names":["getMondays","date","d","Date","getTime","month","getMonth","mondays","setDate","push","getDate","toISOStringShort","toISOString","slice","BookingsController","member","init","MemberStack","onReady","load","dateFrom","dateTo","setMonth","bookings","fetch","console","log","JSON","stringify","fromStr","toStr","customer","url","URL","params","URLSearchParams","code","Number","fromDate","toDate","search","err","error","Webflow","window","controller"],"sourceRoot":""}