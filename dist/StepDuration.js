/*! For license information please see StepDuration.js.LICENSE.txt */
!function(){"use strict";const e=(e,t)=>e.replace(new RegExp(`^${t}`),"");class t{cookie;ops;constructor(){this.cookie=window.FpCookie,this.ops=this.cookie.store}get isValid(){return Object.keys(this.ops).length>0}#e(t){return Object.entries(this.ops).filter((([e,i])=>e.startsWith(t))).reduce(((i,[s,n])=>(i[e(s,t)]=n,i)),{})}#t(t,i){return Object.entries(this.ops).filter((([e,s])=>e.startsWith(t)&&(void 0===i||s===i))).map((([i,s])=>e(i,t)))}get cleaning(){return this.ops["service-cleaning"]?this.#e("cleaning-"):{}}get extras(){return this.ops["service-cleaning"]?this.#t("extra-",!0):[]}get extra(){return this.ops["service-cleaning"]?this.#e("extra-"):{}}get ironing(){return this.ops["service-ironing"]?this.ops.ironing.replace("ironing-size-",""):""}get postalCode(){return this.ops["postal-code"]}get services(){return this.#t("service-",!0)}get service(){return this.#e("service-")}get duration(){return this.ops?.duration}get recurrence(){return this.ops?.frequency}get start(){return new Date(this.ops["start-timestamp"])}get end(){return new Date(this.ops["end-timestamp"])}get teamMember(){return{id:this.ops["team-member"],name:this.ops["team-member-name"],firstName:this.ops["team-member-first-name"]}}}class i{ops;constructor(){this.ops=new t}get total(){return 3+this.services+this.ironing+this.cleaning}get services(){const{services:e}=this.ops;let t=0;return e.length>1&&(t+=this.ops.service.cooking?.5:0,t+=this.ops.service.grocery?.5:0),t}get ironing(){if(!this.ops.service.ironing)return 0;switch(this.ops.ironing){case"xs":return.5;case"s":return 1;case"m":return 2;case"l":return 3;case"xl":return 4;default:return 0}}get cleaning(){if(!this.ops.service.cleaning)return 0;const{extra:e}=this.ops;let t=e.windows?1:0;t+=e.cabinets?1:0,t+=e.fridge?.5:0,t+=e.oven?.5:0;const i=this.ops.cleaning.bedrooms,s=this.ops.cleaning.bathrooms;switch(i){case"3":case"4":t+=1;break;case"5+":t+=2}switch(s){case"2":t+=1;break;case"3":t+=2;break;case"4+":t+=3}return t}}function s(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}return e}var n=function e(t,i){function n(e,n,r){if("undefined"!=typeof document){"number"==typeof(r=s({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in r)r[c]&&(o+="; "+c,!0!==r[c]&&(o+="="+r[c].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],s={},n=0;n<i.length;n++){var r=i[n].split("="),o=r.slice(1).join("=");try{var c=decodeURIComponent(r[0]);if(s[c]=t.read(o,c),e===c)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){n(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),r=n;const o="/booking",c="/booking/services",a="/booking/duration",u="__booking";class h{#i;list;constructor(e){const t=r.get(u);if(t){const e=JSON.parse(t);this.list=e.seq}else this.init({});this.current=e}init({ironing:e=!1,cleaning:t=!1}={}){let i=[o,c];e&&i.push("/booking/ironing"),t&&i.push("/booking/cleaning"),i=i.concat([a,"/booking/availability","/booking/confirmation"]),this.list=i,this.setCookies()}setCookies(){r.set(u,JSON.stringify({seq:this.list}),{secure:!0,sameSite:"strict"})}next(){return this.list[this.#i+1]}prev(){return this.list[this.#i-1]}get total(){return this.list.length}get current(){return this.list[this.#i]}set current(e){const t=Object.values(this.list).findIndex((t=>t===e));t>=0&&(this.#i=t)}get currentIndex(){return this.#i}}class l{static id(e){return document.getElementById(e)}static q(e){return document.querySelector(e)}static qall(e){return document.querySelectorAll(e)}static toast(e){const t=l.id(e);return t.classList.add("active"),setTimeout((()=>{t.classList.remove("active")}),4e3)}static set nextButtonDisabled(e){const t=document.querySelector(".next-button-flow");t&&(t.disabled=e,e?t.classList.add("disabled"):t.classList.remove("disabled"))}static queryOptions(e,t=!1){return Array.from(document.querySelectorAll(`input[id*='${e}']${t?":checked":""}`))}static getRadio(e,t=!1){return this.q(`input[name*="${e}"]${t?":checked":""}`)}static queryRadio(e,t=!1){return Array.from(this.qall(`input[name*='${e}']${t?":checked":""}`))}static getOption(e,t=!1){return this.q(`input[id*='${e}']${t?":checked":""}`)}}var d=l;class p{sequence;constructor({formId:e="wf-form-step",sequence:t=new h}){this.sequence=t,d.id(e)&&(d.id(e).onsubmit=this.onNext.bind(this)),d.id("back-button")?.addEventListener("click",this.onBack.bind(this)),window.onpopstate=this.onBack.bind(this)}restart(){window.location.href=c}goto(e){window.location.href=e}onNext(e){e.preventDefault(),history.pushState({},null,location.href),window.location.href=this.sequence.next()}onBack(){window.location.href=this.sequence.prev()}}window.Step=class extends class{form;nav;ops;constructor(e,i="wf-form-step"){this.form=d.id(i),this.nav=new p({formId:i,sequence:new h(e)}),this.ops=new t,this.validateState()}init(){this.setupInputHandlers(),d.nextButtonDisabled=!0,this.toggleNext(),this.updateNav()}setupInputHandlers(){this.form.querySelectorAll("input").forEach((e=>{if("submit"===e.type)return;const t={radio:"click",number:"input"}[e.type]||"change";e.addEventListener(t,this.toggleNext.bind(this)),e.checked=!1}))}validateState(){this.ops.isValid&&this.ops.postalCode?0===this.ops.services.length&&this.nav.goto(c):this.nav.goto(o)}toggleNext(){d.nextButtonDisabled=this.isNextDisabled}get isNextDisabled(){return!1}updateNav(){d.id("step-nav").innerHTML=`Step ${this.nav.sequence.currentIndex}/${this.nav.sequence.total-1}`}}{constructor(){super(a)}init(){super.init(),this.estimation=this.estimation}get estimation(){const e=new i,{total:t}=e;return t}set estimation(e){d.id("duration").nextElementSibling.noUiSlider.set(e)}get isNextDisabled(){return!d.getRadio("frequency",!0)}}}();
//# sourceMappingURL=StepDuration.js.map